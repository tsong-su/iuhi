<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    background: #fdfdfd;
    overflow: hidden;
  }

  /* === éŠæˆ²åç¨± === */
  header {
    font-size: 20px;
    font-weight: bold;
    padding: 10px;
    text-align: center;
  }

  /* === åœ°åœ–ç½®ä¸­ === */
  #game-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
  }
  #map {
    max-width: 60%;
    max-height: 60%;
    object-fit: contain;
    display: block;
  }

  /* === éƒµç¥¨ === */
  .stamp {
    position: absolute;
    width: 95px;   /* âœ… æ¯”ç´…æ¡†å¤§ä¸€äº›ï¼Œä¸»è§’æ„Ÿ */
    height: 95px;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.4);
    border-radius: 6px;
  }

  /* === ç´…é»ï¼ˆè¼”åŠ©æ¨™è¨˜æ¨¡å¼ç”¨ï¼‰ === */
  .dot {
    position: absolute;
    width: 12px;
    height: 12px;
    background: red;
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }

  /* === æ§åˆ¶å€å·¥å…·åˆ— === */
  footer {
    display: flex;
    justify-content: center;
    gap: 10px;   /* âœ… æ›´å¯†é›† */
    padding: 10px;
  }
  button {
    padding: 5px 12px;
    font-size: 14px;
    cursor: pointer;
  }

  /* === åº§æ¨™æ¸…å–® === */
  #coords-list {
    white-space: pre-wrap;
    background: #eee;
    padding: 5px;
    margin-top: 10px;
    font-size: 12px;
    display: none;
  }
</style>

<body>
  <header>è‡ºç£åŒ—éƒ¨åœ°åœ–&æ³¨éŸ³ç¬¦è™Ÿéƒµç¥¨é…å°éŠæˆ²</header>

  <div id="game-container">
    <img id="map" src="game4_assets/north2_map.png" alt="åœ°åœ–">
  </div>

  <footer>
    <div>
      <button onclick="shiftStamps('left', -10)">å·¦å´å¾€å·¦ â†10</button>
      <button onclick="shiftStamps('left', 10)">å·¦å´å¾€å³ â†’10</button>
    </div>
    <div>
      <button onclick="shiftStamps('right', -10)">å³å´å¾€å·¦ â†10</button>
      <button onclick="shiftStamps('right', 10)">å³å´å¾€å³ â†’10</button>
    </div>
    <button onclick="goHome()">å›åˆ°éŠæˆ²é¦–é </button>
    <button onclick="toggleMarkerMode()">è¼”åŠ©æ¨™è¨˜æ¨¡å¼</button>
  </footer>

  <div id="coords-list"></div>

  <script>
    const gameContainer = document.getElementById("game-container");
    const map = document.getElementById("map");
    const coordsList = document.getElementById("coords-list");
    let markerMode = false;
    let coords = [];

    // === å»ºç«‹éƒµç¥¨ ===
    const stamps = [];
    function createStamps(){
      const spacingX = 90;
      const spacingY = 100;
      const offsetXLeft = -160;
      const offsetXRight = 160;

      for(let i=0;i<6;i++){ // å·¦å´6å¼µ
        const stamp=document.createElement("img");
        stamp.className="stamp";
        stamp.src=`game4_assets/stamp${i+1}.png`; 
        stamp.style.left=`calc(25% + ${(i%3)*spacingX + offsetXLeft}px)`;
        stamp.style.top=`${120 + Math.floor(i/3)*spacingY}px`;
        gameContainer.appendChild(stamp);
        stamps.push(stamp);
      }
      for(let i=0;i<6;i++){ // å³å´6å¼µ
        const stamp=document.createElement("img");
        stamp.className="stamp";
        stamp.src=`game4_assets/stamp${i+7}.png`; 
        stamp.style.left=`calc(75% + ${(i%3)*spacingX + offsetXRight}px)`;
        stamp.style.top=`${120 + Math.floor(i/3)*spacingY}px`;
        gameContainer.appendChild(stamp);
        stamps.push(stamp);
      }
    }
    createStamps();

    // === è¼”åŠ©æ¨™è¨˜æ¨¡å¼ ===
    function toggleMarkerMode(){
      markerMode = !markerMode;
      coordsList.style.display = markerMode ? "block" : "none";
      if(markerMode){
        coordsList.textContent = "ğŸ“ è¼”åŠ©æ¨™è¨˜æ¨¡å¼å•Ÿå‹•ä¸­...\n";
        coords = [];
      } else {
        coordsList.textContent += "\nâŒ å·²é—œé–‰è¼”åŠ©æ¨™è¨˜æ¨¡å¼";
      }
    }

    map.addEventListener("click",(e)=>{
      if(!markerMode) return;
      const rect = map.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width;
      const y = (e.clientY - rect.top) / rect.height;

      const dot=document.createElement("div");
      dot.className="dot";
      dot.style.left=`${x*100}%`;
      dot.style.top=`${y*100}%`;
      gameContainer.appendChild(dot);

      const coord = `{x:${x.toFixed(2)}, y:${y.toFixed(2)}}`;
      coords.push(coord);
      coordsList.textContent += coord + "\n";
    });

    function shiftStamps(side,dx){
      console.log(`ç§»å‹• ${side} éƒµç¥¨ ${dx}`);
    }

    function goHome(){
      window.location.href="index.html";
    }
  </script>
</body>
