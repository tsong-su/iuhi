// === 紅框更新 ===
function updateFrames() {
  const rect = map.getBoundingClientRect();

  // 計算實際圖片繪製區域 (去掉 contain 留白)
  const imgRatio = map.naturalWidth / map.naturalHeight;
  const rectRatio = rect.width / rect.height;

  let drawWidth, drawHeight, offsetX, offsetY;
  if (imgRatio > rectRatio) {
    // 寬受限
    drawWidth = rect.width;
    drawHeight = rect.width / imgRatio;
    offsetX = rect.left;
    offsetY = rect.top + (rect.height - drawHeight) / 2;
  } else {
    // 高受限
    drawHeight = rect.height;
    drawWidth = rect.height * imgRatio;
    offsetY = rect.top;
    offsetX = rect.left + (rect.width - drawWidth) / 2;
  }

  frames.forEach(f => {
    const x = parseFloat(f.dataset.x);
    const y = parseFloat(f.dataset.y);
    f.style.left = `${offsetX + drawWidth * x - f.offsetWidth/2}px`;
    f.style.top  = `${offsetY + drawHeight* y - f.offsetHeight/2}px`;
  });
}
