<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>北部郵票配對遊戲</title>
<style>
  body {
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #f8f8f8;
  }

  .container {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 20px;
    width: 100%;
    height: 100%;
  }

  /* 郵票側邊欄 */
  .stamps {
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 15px;
  }

  .stamps img {
    width: 120px;   /* 放大郵票 */
    height: 120px;
    object-fit: contain;
    cursor: grab;
  }

  /* 地圖區塊 */
  .map-container {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .map-container img {
    width: 50vw;   /* 地圖縮小到視窗 50% */
    height: auto;
    display: block;
  }

  /* 紅框 */
  .drop-zone {
    position: absolute;
    width: 90px;   /* 比郵票小 */
    height: 90px;
    border: 2px solid red;
    box-sizing: border-box;
    pointer-events: none; /* 不能直接拖到紅框 */
  }

  /* 成功放置後鎖定 */
  .dropped {
    position: absolute;
    width: 120px;
    height: 120px;
    pointer-events: none;
  }
</style>
</head>
<body>
  <div class="container">
    <!-- 左側郵票 -->
    <div class="stamps" id="left-stamps"></div>

    <!-- 地圖 -->
    <div class="map-container">
      <img id="map" src="north2_map.png" alt="地圖">
      <div id="dropzones"></div>
    </div>

    <!-- 右側郵票 -->
    <div class="stamps" id="right-stamps"></div>
  </div>

<script>
const leftStamps = [
  "stamp1.jpg", "stamp2.jpg", "stamp3.jpg", "stamp4.jpg",
  "stamp5.jpg", "stamp6.jpg"
];
const rightStamps = [
  "stamp7.jpg", "stamp8.jpg", "stamp9.jpg", "stamp10.jpg",
  "stamp11.jpg", "stamp12.jpg"
];

// 動態載入郵票
function loadStamps(containerId, stamps) {
  const container = document.getElementById(containerId);
  stamps.forEach(src => {
    const img = document.createElement("img");
    img.src = src;  // 直接讀取 stamp1.jpg ~ stamp12.jpg
    img.draggable = true;
    img.addEventListener("dragstart", dragStart);
    container.appendChild(img);
  });
}
loadStamps("left-stamps", leftStamps);
loadStamps("right-stamps", rightStamps);

// 拖曳處理
function dragStart(event) {
  event.dataTransfer.setData("text/plain", event.target.src);
}

// 建立紅框
const map = document.getElementById("map");
const dropzones = document.getElementById("dropzones");

map.addEventListener("load", () => {
  fetch("north_answer.json")
    .then(res => res.json())
    .then(data => {
      const scale = map.width / data.originalWidth; // 根據縮小比例
      data.locations.forEach(loc => {
        const dz = document.createElement("div");
        dz.className = "drop-zone";
        dz.style.left = (loc.x * scale - 45) + "px";
        dz.style.top = (loc.y * scale - 45) + "px";
        dropzones.appendChild(dz);
      });
    });
});
</script>
</body>
</html>
