<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è‡ºç£åŒ—éƒ¨åœ°å€éƒµç¥¨é…å°éŠæˆ²</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #fdfaf0; /* æ·ºç±³ç™½åº•è‰² */
    margin: 0;
    padding: 0;
    text-align: center;
  }
  #game-container {
    position: relative;
    width: 90vw;
    max-width: 900px;
    height: 80vh;
    margin: 1em auto;
    background: url('game4_assets/north_map.jpg') no-repeat center center;
    background-size: contain;
    border: 2px solid #333;
  }
  .stamp {
    width: 80px;
    height: 80px;
    position: absolute;
    cursor: grab;
    z-index: 2;
  }
  .dropzone {
    position: absolute;
    width: 80px;
    height: 80px;
    border: 2px dashed transparent;
    z-index: 1;
  }
  .dropzone.correct {
    border-color: green;
  }
  #success-message {
    display: none;
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 4em;
    color: red;
    font-weight: bold;
    z-index: 3;
  }
  #home-btn {
    margin-top: 1em;
    padding: 0.5em 2em;
    font-size: 1.2em;
    border-radius: 10px;
    background-color: #4fc3f7;
    color: white;
    text-decoration: none;
  }
</style>
</head>
<body>

<h2>è‡ºç£åŒ—éƒ¨åœ°å€éƒµç¥¨é…å°éŠæˆ²</h2>
<div id="game-container">
  <div id="success-message">æœ‰å¤ gÃ¢u ğŸ‰</div>
</div>

<a href="index.html" id="home-btn">å›åˆ°éŠæˆ²é¦–é </a>

<script>
const container = document.getElementById('game-container');

const stampsData = [
  {id:'stamp1', img:'game4_assets/stamp1.jpg', audio:'game4_assets/stamp1.mp3'},
  {id:'stamp2', img:'game4_assets/stamp2.jpg', audio:'game4_assets/stamp2.mp3'},
  {id:'stamp3', img:'game4_assets/stamp3.jpg', audio:'game4_assets/stamp3.mp3'},
  {id:'stamp4', img:'game4_assets/stamp4.jpg', audio:'game4_assets/stamp4.mp3'},
  {id:'stamp5', img:'game4_assets/stamp5.jpg', audio:'game4_assets/stamp5.mp3'},
  {id:'stamp6', img:'game4_assets/stamp6.jpg', audio:'game4_assets/stamp6.mp3'},
  {id:'stamp7', img:'game4_assets/stamp7.jpg', audio:'game4_assets/stamp7.mp3'},
  {id:'stamp8', img:'game4_assets/stamp8.jpg', audio:'game4_assets/stamp8.mp3'},
  {id:'stamp9', img:'game4_assets/stamp9.jpg', audio:'game4_assets/stamp9.mp3'},
  {id:'stamp10', img:'game4_assets/stamp10.jpg', audio:'game4_assets/stamp10.mp3'},
  {id:'stamp11', img:'game4_assets/stamp11.jpg', audio:'game4_assets/stamp11.mp3'},
  {id:'stamp12', img:'game4_assets/stamp12.jpg', audio:'game4_assets/stamp12.mp3'},
];

const wrongAudio = new Audio('game4_assets/wrong.mp3');

const dropzonesData = [
  {id:'drop1', left:'10%', top:'10%', stampId:'stamp1'},
  {id:'drop2', left:'30%', top:'12%', stampId:'stamp2'},
  {id:'drop3', left:'50%', top:'15%', stampId:'stamp3'},
  {id:'drop4', left:'70%', top:'18%', stampId:'stamp4'},
  {id:'drop5', left:'20%', top:'35%', stampId:'stamp5'},
  {id:'drop6', left:'40%', top:'40%', stampId:'stamp6'},
  {id:'drop7', left:'60%', top:'45%', stampId:'stamp7'},
  {id:'drop8', left:'80%', top:'50%', stampId:'stamp8'},
  {id:'drop9', left:'15%', top:'60%', stampId:'stamp9'},
  {id:'drop10', left:'35%', top:'65%', stampId:'stamp10'},
  {id:'drop11', left:'55%', top:'70%', stampId:'stamp11'},
  {id:'drop12', left:'75%', top:'75%', stampId:'stamp12'},
];

// å»ºç«‹ dropzones
dropzonesData.forEach(dz=>{
  const div = document.createElement('div');
  div.className = 'dropzone';
  div.id = dz.id;
  div.style.left = dz.left;
  div.style.top = dz.top;
  div.dataset.stampId = dz.stampId;
  container.appendChild(div);

  div.addEventListener('dragover', e=>e.preventDefault());
  div.addEventListener('drop', e=>{
    e.preventDefault();
    const stampId = e.dataTransfer.getData('text/plain');
    const stampEl = document.getElementById(stampId);
    if(stampId === div.dataset.stampId){
      div.appendChild(stampEl);
      stampEl.style.left='0';
      stampEl.style.top='0';
      stampEl.draggable = false;
      div.classList.add('correct');
      new Audio(stampsData.find(s=>s.id===stampId).audio).play();
      checkAllCorrect();
    } else {
      wrongAudio.play();
      stampEl.style.left = stampEl.dataset.origLeft;
      stampEl.style.top = stampEl.dataset.origTop;
    }
  });
});

// å»ºç«‹éƒµç¥¨
stampsData.forEach((s,i)=>{
  const img = document.createElement('img');
  img.src = s.img;
  img.id = s.id;
  img.className = 'stamp';
  img.draggable = true;
  // éš¨æ©Ÿæ‰“æ•£ä½ç½®
  const left = 5 + Math.random()*75;
  const top = 5 + Math.random()*60;
  img.style.left = left+'%';
  img.style.top = top+'%';
  img.dataset.origLeft = left+'%';
  img.dataset.origTop = top+'%';

  img.addEventListener('dragstart', e=>{
    e.dataTransfer.setData('text/plain', e.target.id);
  });
  container.appendChild(img);
});

function checkAllCorrect(){
  const allCorrect = Array.from(document.querySelectorAll('.dropzone'))
                         .every(dz=>dz.classList.contains('correct'));
  if(allCorrect){
    document.getElementById('success-message').style.display = 'block';
  }
}
</script>

</body>
</html>
