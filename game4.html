<style>
  body {
    margin: 0;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    background: #fdfdfd;
    overflow: hidden;
  }

  /* === 遊戲名稱 === */
  header {
    font-size: 20px;
    font-weight: bold;
    padding: 10px;
    text-align: center;
  }

  /* === 地圖置中 === */
  #game-container {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
  }
  #map {
    max-width: 60%;
    max-height: 60%;
    object-fit: contain;
    display: block;
  }

  /* === 郵票 === */
  .stamp {
    position: absolute;
    width: 95px;   /* ✅ 比紅框大一些，主角感 */
    height: 95px;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.4);
    border-radius: 6px;
  }

  /* === 紅點（輔助標記模式用） === */
  .dot {
    position: absolute;
    width: 12px;
    height: 12px;
    background: red;
    border-radius: 50%;
    transform: translate(-50%, -50%);
  }

  /* === 控制區工具列 === */
  footer {
    display: flex;
    justify-content: center;
    gap: 10px;   /* ✅ 更密集 */
    padding: 10px;
  }
  button {
    padding: 5px 12px;
    font-size: 14px;
    cursor: pointer;
  }

  /* === 座標清單 === */
  #coords-list {
    white-space: pre-wrap;
    background: #eee;
    padding: 5px;
    margin-top: 10px;
    font-size: 12px;
    display: none;
  }
</style>

<body>
  <header>臺灣北部地圖&注音符號郵票配對遊戲</header>

  <div id="game-container">
    <img id="map" src="game4_assets/north2_map.png" alt="地圖">
  </div>

  <footer>
    <div>
      <button onclick="shiftStamps('left', -10)">左側往左 ←10</button>
      <button onclick="shiftStamps('left', 10)">左側往右 →10</button>
    </div>
    <div>
      <button onclick="shiftStamps('right', -10)">右側往左 ←10</button>
      <button onclick="shiftStamps('right', 10)">右側往右 →10</button>
    </div>
    <button onclick="goHome()">回到遊戲首頁</button>
    <button onclick="toggleMarkerMode()">輔助標記模式</button>
  </footer>

  <div id="coords-list"></div>

  <script>
    const gameContainer = document.getElementById("game-container");
    const map = document.getElementById("map");
    const coordsList = document.getElementById("coords-list");
    let markerMode = false;
    let coords = [];

    // === 建立郵票 ===
    const stamps = [];
    function createStamps(){
      const spacingX = 90;
      const spacingY = 100;
      const offsetXLeft = -160;
      const offsetXRight = 160;

      for(let i=0;i<6;i++){ // 左側6張
        const stamp=document.createElement("img");
        stamp.className="stamp";
        stamp.src=`game4_assets/stamp${i+1}.png`; 
        stamp.style.left=`calc(25% + ${(i%3)*spacingX + offsetXLeft}px)`;
        stamp.style.top=`${120 + Math.floor(i/3)*spacingY}px`;
        gameContainer.appendChild(stamp);
        stamps.push(stamp);
      }
      for(let i=0;i<6;i++){ // 右側6張
        const stamp=document.createElement("img");
        stamp.className="stamp";
        stamp.src=`game4_assets/stamp${i+7}.png`; 
        stamp.style.left=`calc(75% + ${(i%3)*spacingX + offsetXRight}px)`;
        stamp.style.top=`${120 + Math.floor(i/3)*spacingY}px`;
        gameContainer.appendChild(stamp);
        stamps.push(stamp);
      }
    }
    createStamps();

    // === 輔助標記模式 ===
    function toggleMarkerMode(){
      markerMode = !markerMode;
      coordsList.style.display = markerMode ? "block" : "none";
      if(markerMode){
        coordsList.textContent = "📍 輔助標記模式啟動中...\n";
        coords = [];
      } else {
        coordsList.textContent += "\n❌ 已關閉輔助標記模式";
      }
    }

    map.addEventListener("click",(e)=>{
      if(!markerMode) return;
      const rect = map.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width;
      const y = (e.clientY - rect.top) / rect.height;

      const dot=document.createElement("div");
      dot.className="dot";
      dot.style.left=`${x*100}%`;
      dot.style.top=`${y*100}%`;
      gameContainer.appendChild(dot);

      const coord = `{x:${x.toFixed(2)}, y:${y.toFixed(2)}}`;
      coords.push(coord);
      coordsList.textContent += coord + "\n";
    });

    function shiftStamps(side,dx){
      console.log(`移動 ${side} 郵票 ${dx}`);
    }

    function goHome(){
      window.location.href="index.html";
    }
  </script>
</body>
