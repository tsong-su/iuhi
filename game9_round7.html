<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>果子骰仔遊戲-第3回</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
<style>
body, html{margin:0;padding:0;font-family:"Noto Sans TC","Microsoft JhengHei",sans-serif;background:#fffbea;color:#222;display:flex;flex-direction:column;align-items:center;}
header{text-align:center;padding:14px 10px 4px;width:100%;}
h1{margin:0;font-size:6.5vw;color:#d94f4f;line-height:1;}
.hint{margin-top:8px;font-size:4.8vw;color:#ff6600;font-weight:700;}
main{width:100%;max-width:520px;padding:8px 12px 18px;display:flex;flex-direction:column;align-items:center;gap:8px;flex:1 1 auto;}
.cube-wrap{width:100%;display:flex;justify-content:center;align-items:center;}
.cube-stage{width:min(90vw,200px);height:min(90vw,200px);max-width:200px;max-height:200px;perspective:1200px;display:flex;align-items:center;justify-content:center;}
.cube{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform 1800ms cubic-bezier(.19,.57,.3,.98);}
.face{position:absolute;left:0;top:0;width:100%;height:100%;border-radius:12px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:#fff;box-shadow:0 12px 22px rgba(0,0,0,0.12),inset 0 0 0 2px rgba(0,0,0,0.02);border:6px solid #c74444;backface-visibility:hidden;}
.face img{width:92%;height:92%;object-fit:contain;display:block;border-radius:8px;}
.face.front{transform:rotateY(0deg) translateZ(50%);}
.face.back{transform:rotateY(180deg) translateZ(50%);}
.face.right{transform:rotateY(90deg) translateZ(50%);}
.face.left{transform:rotateY(-90deg) translateZ(50%);}
.face.top{transform:rotateX(90deg) translateZ(50%);}
.face.bottom{transform:rotateX(-90deg) translateZ(50%);}
#result{width:100%;min-height:120px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;}
.fruit-name{font-size:6.5vw;color:#ff4081;font-weight:800;line-height:1;}
.fruit-roman{font-size:5vw;color:#009688;font-weight:700;margin-top:4px;}
.play-audio{margin-top:8px;padding:8px 18px;border-radius:12px;border:none;background:#3f51b5;color:#fff;font-weight:700;font-size:4.6vw;cursor:pointer;display:none;}
.controls{display:flex;gap:8px;justify-content:center;align-items:center;width:100%;margin-top:6px;}
#rollBtn{background:#ff6b35;color:#fff;border:none;border-radius:12px;padding:12px 20px;font-weight:800;font-size:5.2vw;cursor:pointer;box-shadow:0 8px 20px rgba(0,0,0,0.12);}
.bottom{width:100%;padding:12px 10px 22px;display:flex;justify-content:center;gap:10px;}
.bottom button{border:none;padding:10px 12px;border-radius:12px;color:#fff;font-weight:800;cursor:pointer;font-size:4.6vw;}
#againBtn{background:#4caf50;}
#nextBtn{background:#2196f3;}
#homeBtn{background:#9c27b0;}
@media(min-width:720px){h1{font-size:28px}.hint{font-size:16px}.fruit-name{font-size:28px}.fruit-roman{font-size:18px}#rollBtn{font-size:16px}.play-audio{font-size:14px}.bottom button{font-size:14px}}
</style>
</head>
<body>
<header>
<h1>果子骰仔遊戲-第3回</h1>
<div class="hint">📱 建議直式觀看效果最佳</div>
</header>
<main>
<div class="cube-wrap">
<div class="cube-stage" id="stage">
<div id="cube" class="cube" aria-hidden="false" role="img" aria-label="果子骰子">
<div class="face front"><img src="game9_assets/fruit13.png" alt="棗仔"></div>
<div class="face back"><img src="game9_assets/fruit14.png" alt="柚仔"></div>
<div class="face right"><img src="game9_assets/fruit15.png" alt="李仔"></div>
<div class="face left"><img src="game9_assets/fruit16.png" alt="柿仔"></div>
<div class="face top"><img src="game9_assets/fruit17.png" alt="荔枝"></div>
<div class="face bottom"><img src="game9_assets/fruit18.png" alt="龍眼"></div>
</div>
</div>
</div>
<div class="controls">
<button id="rollBtn">撚骰仔 🎲</button>
</div>
<div id="result">
<div class="fruit-name" id="fruitName">&nbsp;</div>
<div class="fruit-roman" id="fruitRoman">&nbsp;</div>
<button id="playPron" class="play-audio">🔊 聽台語發音</button>
</div>
</main>
<div class="bottom">
<button id="againBtn">閣耍一擺</button>
<button id="nextBtn">後一回</button>
<button id="homeBtn">轉去遊戲頭頁</button>
</div>
<audio id="rollSound" src="game9_assets/Roll the dice.mp3" preload="auto"></audio>
<audio id="dingSound" src="game9_assets/ding.mp3" preload="auto"></audio>
<audio id="fruitSound" preload="auto"></audio>
<script>
const fruits=[
{name:"棗仔", roman:"tsó-á", img:"game9_assets/fruit13.png", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/8/8491.mp3"},
{name:"柚仔", roman:"iū-á", img:"game9_assets/fruit14.png", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5085.mp3"},
{name:"李仔", roman:"lí-á", img:"game9_assets/fruit15.png", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/3/3227.mp3"},
{name:"柿仔", roman:"khī-á", img:"game9_assets/fruit16.png", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5087.mp3"},
{name:"荔枝", roman:"nāi-tsi", img:"game9_assets/fruit17.png", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/6/6646.mp3"},
{name:"龍眼", roman:"lîng-gíng", img:"game9_assets/fruit18.png", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/12/12106.mp3"}
];

const faceAngles=[
{X:0,Y:0},{X:0,Y:180},{X:0,Y:-90},{X:0,Y:90},{X:-90,Y:0},{X:90,Y:0}
];

const cube=document.getElementById("cube");
const rollBtn=document.getElementById("rollBtn");
const againBtn=document.getElementById("againBtn");
const fruitNameEl=document.getElementById("fruitName");
const fruitRomanEl=document.getElementById("fruitRoman");
const playPronBtn=document.getElementById("playPron");
const nextBtn=document.getElementById("nextBtn");
const homeBtn=document.getElementById("homeBtn");
const rollSound=document.getElementById("rollSound");
const dingSound=document.getElementById("dingSound");
const fruitSound=document.getElementById("fruitSound");

let animating=false;

function resetResult(){
  fruitNameEl.innerHTML="&nbsp;";
  fruitRomanEl.innerHTML="&nbsp;";
  playPronBtn.style.display="none";
}

function rollDice(){
  if(animating) return;
  animating=true;
  resetResult();
  const idx=Math.floor(Math.random()*6);
  const fruit=fruits[idx];

  rollSound.currentTime=0;
  rollSound.play().catch(()=>{});

  const xDeg=360*3+faceAngles[idx].X;
  const yDeg=360*3+faceAngles[idx].Y;
  cube.style.transform=`rotateX(${xDeg}deg) rotateY(${yDeg}deg)`;

  setTimeout(()=>{
    rollSound.pause();
    dingSound.currentTime=0;
    dingSound.play().catch(()=>{});
    setTimeout(()=>{
      fruitNameEl.textContent=fruit.name;
      fruitRomanEl.textContent=fruit.roman;
      playPronBtn.style.display="inline-block";
      fruitSound.src=fruit.audio;
      fruitSound.currentTime=0;
      fruitSound.play().catch(()=>{});
      animating=false;
    },500);
  },1800);
}

rollBtn.addEventListener("click",rollDice);
againBtn.addEventListener("click",rollDice);
playPronBtn.addEventListener("click",()=>{fruitSound.play().catch(()=>{});});
homeBtn.addEventListener("click",()=>{window.location.href="index.html";});
nextBtn.addEventListener("click",()=>{window.location.href="game9_round8.html";});
</script>
</body>
</html>
