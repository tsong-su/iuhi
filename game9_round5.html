<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>水果骰仔遊戲–第1回</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #eafbea;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h1 {
      margin-top: 20px;
      font-size: 28px;
    }
    .subtitle {
      font-size: 18px;
      color: #444;
      margin-bottom: 20px;
    }
    .scene {
      width: 180px;   /* 縮小骰子尺寸 */
      height: 180px;
      margin: 20px auto;
      perspective: 800px;
    }
    .dice {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 2s ease-out;
    }
    .face {
      position: absolute;
      width: 180px;
      height: 180px;
      backface-visibility: hidden;
    }
    .face img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .front  { transform: rotateY(0deg) translateZ(90px); }
    .back   { transform: rotateY(180deg) translateZ(90px); }
    .right  { transform: rotateY(90deg) translateZ(90px); }
    .left   { transform: rotateY(-90deg) translateZ(90px); }
    .top    { transform: rotateX(90deg) translateZ(90px); }
    .bottom { transform: rotateX(-90deg) translateZ(90px); }

    .tai-text {
      font-size: 26px;
      margin-top: 15px;
      font-weight: bold;
    }
    .pinyin {
      font-size: 22px;
      margin-top: 8px;
      color: #333;
    }
    .controls {
      margin-top: 10px;
    }
    button {
      padding: 10px 18px;
      margin: 8px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #rollBtn { background-color: #28a745; color: white; }  /* 綠色：撚骰仔 */
    #againBtn { background-color: #007bff; color: white; } /* 藍色：閣耍一擺 */
    #nextBtn { background-color: #ff9800; color: white; }  /* 橘色：後一回 */
    #homeBtn { background-color: #9c27b0; color: white; }  /* 紫色：轉去遊戲頭頁 */
    #soundBtn { background-color: #f44336; color: white; } /* 紅色：聽台語發音 */
  </style>
</head>
<body>
  <h1>水果骰仔遊戲–第1回</h1>
  <div class="subtitle">📱 建議直式觀看效果最佳</div>

  <div class="scene">
    <div class="dice" id="dice">
      <div class="face front"><img src="game9_assets/fruit1.png"></div>
      <div class="face back"><img src="game9_assets/fruit2.png"></div>
      <div class="face right"><img src="game9_assets/fruit3.png"></div>
      <div class="face left"><img src="game9_assets/fruit4.png"></div>
      <div class="face top"><img src="game9_assets/fruit5.png"></div>
      <div class="face bottom"><img src="game9_assets/fruit6.png"></div>
    </div>
  </div>

  <div id="taiText" class="tai-text"></div>
  <div id="pinyin" class="pinyin"></div>
  <div class="controls">
    <button id="soundBtn" onclick="playSound()" style="display:none;">🔊 聽台語發音</button>
  </div>

  <div class="controls">
    <button id="rollBtn">撚骰仔 🎲</button>
  </div>

  <div class="controls">
    <button id="againBtn">閣耍一擺</button>
    <button id="nextBtn">後一回</button>
    <button id="homeBtn">轉去遊戲頭頁</button>
  </div>

  <audio id="rollSound" src="game9_assets/Roll_the_dice.mp3"></audio>
  <audio id="dingSound" src="game9_assets/ding.mp3"></audio>
  <audio id="taiSound"></audio>

  <script>
    const dice = document.getElementById("dice");
    const rollBtn = document.getElementById("rollBtn");
    const taiText = document.getElementById("taiText");
    const pinyin = document.getElementById("pinyin");
    const soundBtn = document.getElementById("soundBtn");
    const taiSound = document.getElementById("taiSound");

    const rollSound = document.getElementById("rollSound");
    const dingSound = document.getElementById("dingSound");

    const fruits = [
      { tai: "檨仔", pinyin: "suāinn-á", audio: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/12/12189.mp3" },
      { tai: "柑仔", pinyin: "kam-á", audio: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5084.mp3" },
      { tai: "弓蕉", pinyin: "king-tsio", audio: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/0/529.mp3" },
      { tai: "林菝仔", pinyin: "ná-pua̍t-á", audio: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/4/4237.mp3" },
      { tai: "王梨", pinyin: "ông-lâi", audio: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/1/1260.mp3" },
      { tai: "時計果", pinyin: "sî-kè-kó", audio: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/14/14205.mp3" }
    ];

    let currentFace = 0;

    rollBtn.addEventListener("click", () => {
      rollSound.play();

      const randX = Math.floor(Math.random() * 4 + 1) * 90;
      const randY = Math.floor(Math.random() * 4 + 1) * 90;
      const randZ = Math.floor(Math.random() * 4 + 1) * 90;

      dice.style.transform = `rotateX(${randX}deg) rotateY(${randY}deg) rotateZ(${randZ}deg)`;

      setTimeout(() => {
        dingSound.play();
        const result = Math.floor(Math.random() * 6);
        currentFace = result;

        taiText.textContent = fruits[result].tai;
        pinyin.textContent = fruits[result].pinyin;
        taiSound.src = fruits[result].audio;
        soundBtn.style.display = "inline-block";
      }, 2000);
    });

    function playSound() {
      taiSound.play();
    }
  </script>
</body>
</html>
