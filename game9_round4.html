<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
<meta charset="UTF-8">
<title>æœå­åœ–ç‰‡&å°èªæœå­åé…å° ç¬¬å››å›</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin:0; padding:0;
  display:flex;
  flex-direction:column;
  align-items:center;
}
h1 { text-align:center; margin-top:10px; }
#hint { font-size:1.2em; margin:5px; color:#d33; text-align:center; }
#grid {
  display:grid;
  grid-template-columns: repeat(4, 80px);
  grid-gap:10px;
  justify-content:center;
  margin:20px 0;
}
.cell {
  width:80px; height:80px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  border:1px solid #ccc;
  cursor:pointer;
  user-select:none;
}
.cell img {
  max-width:70%;
  max-height:50%;
}
.cell span {
  margin-top:5px;
  font-size:0.7em;
  text-align:center;
  word-break: break-word;
}
.buttons {
  display:flex; justify-content:center; gap:10px; margin-bottom:20px;
}
button {
  padding:5px 15px; font-size:1em; cursor:pointer; border:none; border-radius:5px;
  background-color:#f39c12; color:#fff;
}
</style>
</head>
<body>
<h1>æœå­åœ–ç‰‡&å°èªæœå­åé…å° ç¬¬å››å›</h1>
<div id="hint">ğŸ“± å»ºè­°ç›´å¼è§€çœ‹æ•ˆæœæœ€ä½³</div>
<div id="grid"></div>
<div class="buttons">
  <button id="restartBtn">é–£è€ä¸€æ“º</button>
  <button id="nextBtn">å¾Œä¸€å›</button>
  <button id="homeBtn">è½‰å»éŠæˆ²é ­é </button>
</div>

<audio id="correctAudio"></audio>
<audio id="wrongAudio" src="game9_assets/wrong1.mp3"></audio>
<audio id="victoryAudio" src="game9_assets/victory2.mp3"></audio>

<script>
const fruits = [
  {"id":"fruit10","taiwanese":"æŸ³ä¸","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5078.mp3"},
  {"id":"fruit11","taiwanese":"æœ¨ç“œ","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/0/877.mp3"},
  {"id":"fruit12","taiwanese":"æ¢¨ä»”","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/7/7478.mp3"},
  {"id":"fruit13","taiwanese":"æ£—ä»”","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/8/8491.mp3"},
  {"id":"fruit14","taiwanese":"æŸšä»”","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5085.mp3"},
  {"id":"fruit16","taiwanese":"æŸ¿ä»”","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5087.mp3"},
  {"id":"fruit17","taiwanese":"è”æ","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/6/6646.mp3"},
  {"id":"fruit34","taiwanese":"è‡­æŸ¿ä»”","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/6/6575.mp3"}
];

// æ‰“äº‚é™£åˆ—
function shuffle(array){return array.sort(()=>Math.random()-0.5);}

let grid = document.getElementById("grid");
let firstSelection = null;
let matchedCount = 0;
let cellColors = ["#FADBD8","#D6EAF8","#FCF3CF","#D5F5E3","#FAD7A0","#E8DAEF","#D1F2EB","#F5B7B1"];

function createGrid(){
  grid.innerHTML="";
  let items = shuffle([...fruits, ...fruits]); // é‡è¤‡é…å°
  items.forEach((item,i)=>{
    let div = document.createElement("div");
    div.className="cell";
    div.dataset.taiwanese=item.taiwanese;
    div.dataset.audio=item.audio;
    let img = document.createElement("img");
    img.src="game9_assets/"+item.id+".png";
    let span = document.createElement("span");
    span.textContent=item.taiwanese;
    div.appendChild(img);
    div.appendChild(span);
    div.addEventListener("click",()=>selectCell(div));
    grid.appendChild(div);
  });
}
function selectCell(div){
  if(div.classList.contains("matched") || div===firstSelection) return;
  div.style.border="2px solid #555";
  let audio=document.getElementById("correctAudio");
  audio.src=div.dataset.audio;
  audio.play();

  if(!firstSelection){
    firstSelection=div;
  }else{
    if(firstSelection.dataset.taiwanese===div.dataset.taiwanese){
      // é…å°æˆåŠŸ
      let color=cellColors[matchedCount%cellColors.length];
      firstSelection.style.background=color;
      div.style.background=color;
      firstSelection.classList.add("matched");
      div.classList.add("matched");
      matchedCount++;
      firstSelection=null;

      // è‹¥å®Œæˆæœ€å¾Œä¸€çµ„ï¼Œå…ˆæ’­æ”¾æ­£ç¢ºéŸ³æª”ï¼Œå†å»¶é²æ’­æ”¾å‹åˆ©éŸ³æ•ˆ
      if(matchedCount===fruits.length){
        setTimeout(()=>{document.getElementById("victoryAudio").play();},1000);
      }
    }else{
      // é…å°éŒ¯èª¤
      document.getElementById("wrongAudio").play();
      setTimeout(()=>{
        firstSelection.style.border="1px solid #ccc";
        div.style.border="1px solid #ccc";
        firstSelection=null;
      },500);
    }
  }
}

document.getElementById("restartBtn").onclick=createGrid;
document.getElementById("nextBtn").onclick=()=>alert("å¾Œä¸€å›é‚„æœªå»ºç«‹");
document.getElementById("homeBtn").onclick=()=>window.location.href="game9.html";

createGrid();
</script>
</body>
</html>
