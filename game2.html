<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>台語句子排序遊戲</title>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #f5f5dc;
      padding: 20px;
    }
    h2 {
      margin-top: 10px;
    }
    .sortable-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px auto;
      padding: 10px;
      border: 2px dashed #ccc;
      border-radius: 10px;
      background-color: #fff;
      min-height: 60px;
    }
    .word {
      padding: 10px 15px;
      margin: 5px;
      background-color: #fffae6;
      border: 1px solid #ccc;
      border-radius: 8px;
      cursor: move;
      font-size: 20px;
    }
    button {
      margin: 10px 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
    }
    .audio-button {
      background-color: #cce5ff;
    }
    .control-button {
      background-color: #d5f5e3;
    }
  </style>
</head>
<body>
  <h1>台語句子排序遊戲</h1>
  <div id="question-area">
    <h2>請將下列詞語排序組成正確句子</h2>
    <button class="audio-button" onclick="playAudio()">🔊 播放朗讀</button>
    <button onclick="window.open(questions[0].dictionary)" class="control-button">📘 看教典</button>
  </div>
  
  <div id="answer-area" class="sortable-container"></div>
  
  <div>
    <button onclick="checkAnswer()" class="control-button">✅ 提示正確答案</button>
    <button onclick="restart()" class="control-button">🔄 重新開始</button>
    <button onclick="nextQuestion()" class="control-button">➡️ 後一條</button>
    <button onclick="goHome()" class="control-button">🏠 回到遊戲首頁</button>
  </div>

  <script>
    const questions = [
      {
        words: ["囡仔人", "有", "耳", "無", "喙", "。"],
        answer: ["囡仔人", "有", "耳", "無", "喙", "。"],
        audio: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/leku/47/47743.mp3",
        dictionary: "https://sutian.moe.edu.tw/und-hani/su/2144/"
      }
    ];

    let currentQuestionIndex = 0;
    const answerArea = document.getElementById("answer-area");

    function loadQuestion(index) {
      answerArea.innerHTML = "";
      const words = [...questions[index].words];
      shuffle(words);
      for (const word of words) {
        const div = document.createElement("div");
        div.className = "word";
        div.textContent = word;
        answerArea.appendChild(div);
      }
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function playAudio() {
      const audio = new Audio(questions[currentQuestionIndex].audio);
      audio.play();
    }

    function checkAnswer() {
      const items = [...answerArea.children].map(el => el.textContent);
      const correct = questions[currentQuestionIndex].answer;
      if (items.join("") === correct.join("")) {
        alert("🎉 正確！");
      } else {
        alert("❌ 未排對，正確句子是：\n" + correct.join(""));
      }
    }

    function restart() {
      loadQuestion(currentQuestionIndex);
    }

    function nextQuestion() {
      alert("目前只有一題喔！");
    }

    function goHome() {
      window.location.href = "index.html"; // 改成你首頁網址
    }

    // 啟用拖曳
    new Sortable(answerArea, {
      animation: 150
    });

    // 載入初始題目
    loadQuestion(currentQuestionIndex);
  </script>
</body>
</html>
