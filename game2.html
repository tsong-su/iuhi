<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å°èªå¥å­æ’åºéŠæˆ²</title>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      text-align: center;
      background-color: #f5f5dc;
      padding: 20px;
    }
    h2 {
      margin-top: 10px;
    }
    .sortable-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px auto;
      padding: 10px;
      border: 2px dashed #ccc;
      border-radius: 10px;
      background-color: #fff;
      min-height: 60px;
    }
    .word {
      padding: 10px 15px;
      margin: 5px;
      background-color: #fffae6;
      border: 1px solid #ccc;
      border-radius: 8px;
      cursor: move;
      font-size: 20px;
    }
    button {
      margin: 10px 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
    }
    .audio-button {
      background-color: #cce5ff;
    }
    .control-button {
      background-color: #d5f5e3;
    }
  </style>
</head>
<body>
  <h1>å°èªå¥å­æ’åºéŠæˆ²</h1>
  <div id="question-area">
    <h2>è«‹å°‡ä¸‹åˆ—è©èªæ’åºçµ„æˆæ­£ç¢ºå¥å­</h2>
    <button class="audio-button" onclick="playAudio()">ğŸ”Š æ’­æ”¾æœ—è®€</button>
    <button onclick="window.open(questions[0].dictionary)" class="control-button">ğŸ“˜ çœ‹æ•™å…¸</button>
  </div>
  
  <div id="answer-area" class="sortable-container"></div>
  
  <div>
    <button onclick="checkAnswer()" class="control-button">âœ… æç¤ºæ­£ç¢ºç­”æ¡ˆ</button>
    <button onclick="restart()" class="control-button">ğŸ”„ é‡æ–°é–‹å§‹</button>
    <button onclick="nextQuestion()" class="control-button">â¡ï¸ å¾Œä¸€æ¢</button>
    <button onclick="goHome()" class="control-button">ğŸ  å›åˆ°éŠæˆ²é¦–é </button>
  </div>

  <script>
    const questions = [
      {
        words: ["å›¡ä»”äºº", "æœ‰", "è€³", "ç„¡", "å–™", "ã€‚"],
        answer: ["å›¡ä»”äºº", "æœ‰", "è€³", "ç„¡", "å–™", "ã€‚"],
        audio: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/leku/47/47743.mp3",
        dictionary: "https://sutian.moe.edu.tw/und-hani/su/2144/"
      }
    ];

    let currentQuestionIndex = 0;
    const answerArea = document.getElementById("answer-area");

    function loadQuestion(index) {
      answerArea.innerHTML = "";
      const words = [...questions[index].words];
      shuffle(words);
      for (const word of words) {
        const div = document.createElement("div");
        div.className = "word";
        div.textContent = word;
        answerArea.appendChild(div);
      }
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function playAudio() {
      const audio = new Audio(questions[currentQuestionIndex].audio);
      audio.play();
    }

    function checkAnswer() {
      const items = [...answerArea.children].map(el => el.textContent);
      const correct = questions[currentQuestionIndex].answer;
      if (items.join("") === correct.join("")) {
        alert("ğŸ‰ æ­£ç¢ºï¼");
      } else {
        alert("âŒ æœªæ’å°ï¼Œæ­£ç¢ºå¥å­æ˜¯ï¼š\n" + correct.join(""));
      }
    }

    function restart() {
      loadQuestion(currentQuestionIndex);
    }

    function nextQuestion() {
      alert("ç›®å‰åªæœ‰ä¸€é¡Œå–”ï¼");
    }

    function goHome() {
      window.location.href = "index.html"; // æ”¹æˆä½ é¦–é ç¶²å€
    }

    // å•Ÿç”¨æ‹–æ›³
    new Sortable(answerArea, {
      animation: 150
    });

    // è¼‰å…¥åˆå§‹é¡Œç›®
    loadQuestion(currentQuestionIndex);
  </script>
</body>
</html>
