<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>é«˜é›„å¸‚38å€æ–°èˆŠåœ°åäº’å‹•åœ°åœ– v6.4</title>
<style>
  :root{
    /* èˆ‡ v6.2 ä¸€è‡´çš„ç¾¤çµ„ä¸»è‰²ï¼ˆä¾›åœ°åœ–è‘—è‰²èˆ‡æŒ‰éˆ•/å¾½ç« é€£å‹•ï¼‰ */
    --core:#3A7BD5;       /* å¸‚ä¸­å¿ƒ */
    --east:#56ab2f;       /* å¸‚éƒŠ-æ±å€ */
    --north:#ff9966;      /* å¸‚éƒŠ-åŒ—å€ */
    --mountain:#a770ef;   /* å±±å€ */

    --ink:#0f172a;
    --muted:#475569;
    --border:#e5e7eb;
    --card:#ffffff;
  }

  *{box-sizing:border-box}
  body{margin:0;font-family:"Noto Sans TC", system-ui, -apple-system, Segoe UI, Roboto, "Microsoft JhengHei", sans-serif;background:#f6f7f9;color:var(--ink);}

  header{padding:12px 12px 8px;text-align:center}
  header h1{margin:4px 0 6px;font-size:1.6rem;font-weight:700}
  .sub{margin:2px 0;color:#444}
  .hint{margin:2px 0;color:#444}

  /* ç¾¤çµ„æŒ‰éˆ•åˆ—ï¼ˆä¿ç•™ v6.2 è¡Œç‚ºï¼›å¤–è§€å‡ç´šï¼šç«‹é«”æ¼¸å±¤ï¼‹å¾½ç« ï¼‰ */
  .groupbar{margin:8px auto 10px;display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
  .groupbar button{
    position:relative;
    border:0;
    color:#fff;
    padding:10px 22px;
    border-radius:14px;
    cursor:pointer;
    font-size:1rem;
    box-shadow:0 4px 10px rgba(0,0,0,.22);
    transition:filter .25s, transform .02s;
  }
  .groupbar button:active{ transform: translateY(1px); }
  .groupbar button.is-on{outline:2px solid #fff}

  /* å„ç¾¤çµ„æŒ‰éˆ•çš„ç«‹é«”æ¼¸å±¤ï¼ˆèˆ‡ä¸»è‰²ä¸€è‡´ï¼‰ */
  .btn-core   { background:linear-gradient(145deg, #3A7BD5, #00d2ff); }
  .btn-east   { background:linear-gradient(145deg, #56ab2f, #a8e063); }
  .btn-north  { background:linear-gradient(145deg, #ff9966, #ff5e62); }
  .btn-mount  { background:linear-gradient(145deg, #a770ef, #fdb99b); }
  .groupbar button:hover{ filter: brightness(1.08); }

  /* å³ä¸Šè§’å°åœ“å¾½ç« ï¼ˆé¡è‰²è‡ªå‹•èˆ‡æŒ‰éˆ•ä¸»è‰²ç³»å”èª¿çš„æ·ºè‰²ï¼‰ */
  .badge{
    position:absolute; top:-6px; right:-8px;
    min-width:24px; height:24px; padding:0 6px;
    border-radius:999px; display:inline-flex; align-items:center; justify-content:center;
    font-size:.78rem; font-weight:700; color:#000;
    background:rgba(255,255,255,.9);
    box-shadow:0 2px 6px rgba(0,0,0,.28);
  }
  .btn-core  .badge{ background:#a9d4ff; }
  .btn-east  .badge{ background:#c9f7b6; }
  .btn-north .badge{ background:#ffd1b8; }
  .btn-mount .badge{ background:#e8d1ff; }

  main{display:flex;justify-content:center}
  .card{width:100%;max-width:980px;margin:0 12px;background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 8px 18px rgba(0,0,0,.06)}
  .view{position:relative;width:100%;aspect-ratio:1/1;background:#fff;border-radius:14px;overflow:hidden}

  /* è®“ SVG æ°¸é æ»¿ç‰ˆç½®ä¸­é¡¯ç¤ºï¼ˆv6.2 åŒç­‰æ•ˆæœï¼‰ */
  .view svg{width:100%;height:100%}

  /* åœ°åœ–å€å¡Šå…±åŒæ¨£å¼ï¼ˆv6.2ï¼š.districtï¼‰ */
  .district{transition:opacity .25s ease}
  .dim{opacity:.28}

  /* å½ˆå‡ºè³‡è¨Šå¡ï¼ˆæ²¿ç”¨ v6.2 çµæ§‹ï¼›åƒ…æ”¹æ–‡æ¡ˆèˆ‡å–æ¶ˆè‡ªå‹•é€£æ’­ï¼‰ */
  .popup{position:absolute;display:none;min-width:240px;max-width:min(320px,90%);background:#fff;border-radius:12px;border:1px solid rgba(0,0,0,.08);box-shadow:0 10px 28px rgba(0,0,0,.18);padding:12px;z-index:60}
  .popup h3{margin:0 0 4px 0;font-size:1.05rem;color:var(--ink)}
  .popup .newP{color:#0f766e;font-weight:700}
  .popup .old{color:#374151;margin-top:4px}
  .popup .oldP{color:#7c3aed}
  .popup .row{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
  .btn{padding:6px 10px;border-radius:10px;border:0;color:#fff;cursor:pointer;box-shadow:0 3px 8px rgba(0,0,0,.22)}
  .btn.play{background:linear-gradient(145deg,#607d8b,#263238)} /* æ’­æ”¾æ–°åœ°å */
  .btn.old {background:linear-gradient(145deg,#6d4c41,#3e2723)}   /* æ’­æ”¾èˆŠåœ°å */

  footer{padding:12px 0 20px;text-align:center}
  footer a{display:inline-block;text-decoration:none;padding:8px 16px;border-radius:12px;color:#fff;background:linear-gradient(145deg,#4CAF50,#2e7d32);box-shadow:0 3px 8px rgba(0,0,0,.22)}
  footer a:hover{filter:brightness(1.08)}

  /* é»æ“Šå€å¡Šæ™‚çš„å¾®é–ƒå‹•ç•«ï¼ˆv6.2ç­‰æ•ˆï¼‰ */
  .flash{animation:flash .8s ease}
  @keyframes flash{0%{fill-opacity:.5}100%{fill-opacity:1}}
</style>
</head>
<body>
  <header>
    <h1>é«˜é›„å¸‚38å€æ–°èˆŠåœ°åäº’å‹•åœ°åœ–</h1>
    <div class="sub">ğŸ“± å»ºè­°ç›´å¼è§€çœ‹æ•ˆæœæœ€ä½³</div>
    <div class="hint">ğŸ‘† é»è¡Œæ”¿å€çœ‹æ–°èˆŠåœ°åä¸¦æ’­æ”¾éŸ³æª”</div>

    <div class="groupbar" id="groupbar">
      <button data-group="core" class="btn-core is-on">å¸‚ä¸­å¿ƒå€<span class="badge">11</span></button>
      <button data-group="east" class="btn-east">å¸‚éƒŠå€â€“æ±å€<span class="badge">7</span></button>
      <button data-group="north" class="btn-north">å¸‚éƒŠå€â€“åŒ—å€<span class="badge">11</span></button>
      <button data-group="mountain" class="btn-mount">å±±å€<span class="badge">9</span></button>
    </div>
  </header>

  <main>
    <div class="card">
      <div class="view" id="viewport">
        <!-- ä»ä½¿ç”¨ä½ æ—¢æœ‰çš„ SVGï¼›v6.2 å°±æ˜¯æŠŠæ•´ä»½ SVG å…§åµŒæ–¼æ­¤ -->
        <?xml version="1.0" encoding="UTF-8"?>
        <!-- ç›´æ¥è¼‰å…¥ä½ çš„ Blank_Kaohsiung_map.svg å…§å®¹åˆ°é€™å€‹ä½ç½®çš„åšæ³•åœ¨ v6.2 å·²å®Œæˆï¼›
             è‹¥ä½ ä»æ˜¯ä»¥ <svg> å…§åµŒæ–¹å¼å‘ˆç¾ï¼Œä»¥ä¸‹å±¬æ€§è¨­å®šæœƒç¢ºä¿æ»¿ç‰ˆç½®ä¸­ -->
        <svg xmlns="http://www.w3.org/2000/svg"
             version="1.1"
             width="1143.062"
             height="1440.995"
             viewBox="0 0 1143.062 1440.995"
             preserveAspectRatio="xMidYMid meet"
             style="background-color:#ffffff;">
          <!-- ï¼ˆæ­¤è™•ç¶­æŒä½  v6.2 çš„ <g> èˆ‡ <path> çµæ§‹èˆ‡ id/titleï¼Œä¸åšä»»ä½•æ›´å‹•ï¼‰ -->
          <!-- ç‚ºé¿å…å†—é•·ï¼Œç•¥ã€‚è«‹ç›´æ¥æ²¿ç”¨ v6.2 åŸæª”çš„ SVG å…§å®¹ã€‚ -->
        </svg>

        <!-- v6.2 çš„å½ˆå‡ºæµ®æ¡†ï¼ˆæ”¹æ–‡æ¡ˆï¼Œå–æ¶ˆæ–°->èˆŠè‡ªå‹•é€£æ’­ï¼‰ -->
        <div class="popup" id="popup">
          <h3 id="pop-new">â€”</h3>
          <div class="newP" id="pop-new-poj">â€”</div>
          <div class="old" id="pop-old">â€”</div>
          <div class="oldP" id="pop-old-poj">â€”</div>
          <div class="row">
            <button class="btn play" id="btn-new">æ’­æ”¾æ–°åœ°å</button>
            <button class="btn old" id="btn-old">æ’­æ”¾èˆŠåœ°å</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <a href="https://tsong-su.github.io/iuhi/index.html">ğŸ  å›éŠæˆ²é¦–é </a>
  </footer>

<script>
/* ======= v6.2 æ—¢æœ‰å·¥å…·å‡½å¼ï¼ˆä¿ç•™ï¼‰ ======= */
const $=(s,e=document)=>e.querySelector(s), $$=(s,e=document)=>Array.from(e.querySelectorAll(s));
const viewport=$("#viewport"), popup=$("#popup");
const popNew=$("#pop-new"), popNewPoj=$("#pop-new-poj"), popOld=$("#pop-old"), popOldPoj=$("#pop-old-poj");
const btnNew=$("#btn-new"), btnOld=$("#btn-old");
const groupbar=$("#groupbar");

/* ======= ç¾¤çµ„å®šç¾©ï¼ˆå®Œå…¨ä¾ä½ ç¢ºèªè¡¨ï¼›é †åºä¸å¯è®Šï¼‰ ======= */
const GROUPS={
  core:["æ¥ æ¢“","å·¦ç‡Ÿ","é¼“å±±","ä¸‰æ°‘","é¹½åŸ•","å‰é‡‘","æ–°èˆˆ","è‹“é›…","æ——æ´¥","å‰é®","å°æ¸¯"],
  east:["å¤§æ¨¹","å¤§å¯®","æ—åœ’","å¤§ç¤¾","ä»æ­¦","é³¥æ¾","é³³å±±"],
  north:["èŒ„è£","æ°¸å®‰","å½Œé™€","æ¢“å®˜","æ¹–å…§","è·¯ç«¹","å²¡å±±","æ©‹é ­","é˜¿è“®","ç”°å¯®","ç‡•å·¢"],
  mountain:["å…§é–€","æ——å±±","æ‰æ—","ç¾æ¿ƒ","ç”²ä»™","å…­é¾œ","é‚£ç‘ªå¤","æ¡ƒæº","èŒ‚æ—"]
};

/* ======= åœ°åè³‡æ–™ï¼ˆå®Œå…¨ç…§ä½ æä¾›ï¼Œä¸åšä»»ä½•æ”¹å‹•ï¼‰ ======= */
const DATA={
  // å¸‚ä¸­å¿ƒ
  "æ¥ æ¢“":{old:"æ¥ ä»”å‘", newPoj:"LÃ¢m-tsÃº", oldPoj:"LÃ¢m-Ã¡-khenn"},
  "å·¦ç‡Ÿ":{old:"åŸ¤ä»”é ­", newPoj:"TsÃ³-iÃ¢nn", oldPoj:"Pi-Ã¡-thÃ¢u"},
  "é¼“å±±":{old:"æ‰“é¼“å±±", newPoj:"KÃ³o-san", oldPoj:"TÃ¡nn-kÃ³o-san"},
  "ä¸‰æ°‘":{old:"ä¸‰å¡Šå", newPoj:"Sam-bÃ®n", oldPoj:"Sann-tÃ¨-tshÃ¹"},
  "é¹½åŸ•":{old:"é¹½åŸ•åŸ”", newPoj:"IÃ¢m-tiÃ¢nn", oldPoj:"IÃ¢m-tiÃ¢nn-poo"},
  "å‰é‡‘":{old:"å‰è¡¿", newPoj:"TsiÃ¢n-kim", oldPoj:"TsiÃ¢n-khim"},
  "æ–°èˆˆ":{old:"é€®æ¸¯åŸ”", newPoj:"Sin-hing", oldPoj:"TÄi-kÃ¡ng-poo"},
  "è‹“é›…":{old:"ç¬­ä»”å¯®", newPoj:"LÃ®ng-ngÃ¡", oldPoj:"LÃ®ng-Ã¡-liÃ¢u"},
  "æ——æ´¥":{old:"æ——å¾Œ", newPoj:"KÃ®-tin", oldPoj:"KÃ®-Äu"},
  "å‰é®":{old:"å‰é®", newPoj:"TsiÃ¢n-tÃ¬n", oldPoj:"TsiÃ¢n-tÃ¬n"},
  "å°æ¸¯":{old:"æ¸¯ä»”å¢˜", newPoj:"SiÃ³-kÃ¡ng", oldPoj:"KÃ¡ng-Ã¡ kÃ®nn"},

  // æ±å€
  "å¤§æ¨¹":{old:"å¤§æ¨¹è·¤", newPoj:"TuÄ-tshiÅ«", oldPoj:"TuÄ-tshiÅ«-kha"},
  "å¤§å¯®":{old:"å¤§è—”", newPoj:"TuÄ-liÃ¢u", oldPoj:"TuÄ-liÃ¢u"},
  "æ—åœ’":{old:"é ‚æ—ä»”é‚Š", newPoj:"LÃ®m-hnÌ‚g", oldPoj:"TÃ­ng-nÃ¢-Ã¡-pinn"},
  "å¤§ç¤¾":{old:"ä¸‰å¥¶å£‡", newPoj:"TuÄ-siÄ", oldPoj:"Sam-nÃ¡i-tuÃ¢nn"},
  "ä»æ­¦":{old:"ä»æ­¦åº„", newPoj:"JÃ®n-bÃº", oldPoj:"JÃ®n-bÃº-tsng"},
  "é³¥æ¾":{old:"é³¥æ¾è·¤", newPoj:"TsiÃ¡u-tshÃ®ng", oldPoj:"TsiÃ¡u-tshÃ®ng-kha"},
  "é³³å±±":{old:"ä¸‹åŸ¤é ­", newPoj:"HÅng-suann", oldPoj:"Ä’-pi-thÃ¢u"},

  // åŒ—å€
  "èŒ„è£":{old:"èŒ„è‹³è£ä»”", newPoj:"Ka-tiÄnn", oldPoj:"Ka-tang-tiÄnn-Ã¡"},
  "æ°¸å®‰":{old:"çƒæ¨¹æ—", newPoj:"Ãng-an", oldPoj:"Oo-tshiÅ«-nÃ¢"},
  "å½Œé™€":{old:"å½Œé™€æ¸¯", newPoj:"MÃ®-tÃ´", oldPoj:"BÃ®-lÃ´-kÃ¡ng"},
  "æ¢“å®˜":{old:"æ¢“å®˜", newPoj:"TsÃº-kuann", oldPoj:"TsÃº-kuann"},
  "æ¹–å…§":{old:"å¤§æ¹–", newPoj:"Ã”o-lÄi", oldPoj:"TuÄ-Ã´o"},
  "è·¯ç«¹":{old:"åŠè·¯ç«¹", newPoj:"LÅo-tik", oldPoj:"PuÃ nn-lÅo-tik"},
  "å²¡å±±":{old:"é˜¿å…¬åº—", newPoj:"Kong-san", oldPoj:"A-kong-tiÃ m"},
  "æ©‹é ­":{old:"æ©‹ä»”é ­", newPoj:"KiÃ´-thÃ¢u", oldPoj:"KiÃ´-Ã¡-thÃ¢u"},
  "é˜¿è“®":{old:"é˜¿å—¹ç¤¾", newPoj:"A-lian", oldPoj:"A-lian-siÄ"},
  "ç”°å¯®":{old:"ç”°è—”", newPoj:"TshÃ¢n-liÃ¢u", oldPoj:"TshÃ¢n-liÃ¢u"},
  "ç‡•å·¢":{old:"æ´å‰¿å³", newPoj:"IÃ n-tsÃ¢u", oldPoj:"UÄn-tsÃ¢u-iÅ«"},

  // å±±å€
  "å…§é–€":{old:"ç¾…æ¼¢å…§é–€", newPoj:"LÄi-bÃ»n", oldPoj:"LÃ´-hÃ n-lÄi-bÃ»n"},
  "æ——å±±":{old:"è•ƒè–¯è—”", newPoj:"KÃ®-san", oldPoj:"Han-tsÃ®-liÃ¢u"},
  "æ‰æ—":{old:"æ¥ æ¢“ä»™", newPoj:"Sam-nÃ¢", oldPoj:"LÃ¢m-tsÃº-sian"},
  "ç¾æ¿ƒ":{old:"ç€°æ¿ƒ", newPoj:"Bi-long", oldPoj:"BÃ®-long"},
  "ç”²ä»™":{old:"é˜¿é‡Œé—œ", newPoj:"Kah-sian", oldPoj:"A-lÃ­-kuan"},
  "å…­é¾œ":{old:"å…­é¾œé‡Œç¤¾", newPoj:"LaÌk-ku", oldPoj:"LaÌk-ku-lÃ­-siÄ"},
  "é‚£ç‘ªå¤":{old:"èšŠå­åª", newPoj:"Na-mÃ¡-siah", oldPoj:"Mangacun"},
  "æ¡ƒæº":{old:"é›…çˆ¾", newPoj:"ThÃ´-guÃ¢n", oldPoj:"Ngani"},
  "èŒ‚æ—":{old:"å¤šç´", newPoj:"BÅo-lÃ®m", oldPoj:"TÅ-na"}
};

/* åœ°åœ–è‘—è‰²ä¸»è‰²ï¼ˆæ²¿ç”¨ v6.2 è®Šæ•¸ï¼‰ */
const GROUP_COLOR={ core:"var(--core)", east:"var(--east)", north:"var(--north)", mountain:"var(--mountain)" };

/* å·¥å…· */
function stripQu(s){return (s||"").replace(/å€$/,'');}
function zhFromAny(t){const m=(t||'').match(/[\u4E00-\u9FFF]+/g); return m? m.join(''): '';}

/* æŠŠå…§åµŒ SVG å–å‡ºã€å°æ‡‰ path -> å€åï¼Œå»ºç«‹ items é™£åˆ— */
const svg=$("#viewport svg");
let items=[];
if(svg){
  // v6.2 ä¸€æ¨£ï¼šè‹¥ç¼º viewBoxï¼Œå‹•æ…‹è£œé½Šï¼›ç¢ºä¿æ»¿ç‰ˆä¸æº¢å‡º
  try{
    if(!svg.hasAttribute("viewBox")){
      const b=svg.getBBox();
      svg.setAttribute("viewBox",`${b.x} ${b.y} ${b.width} ${b.height}`);
    }
  }catch(e){}
  svg.setAttribute("preserveAspectRatio","xMidYMid meet");
  svg.setAttribute("width","100%"); svg.setAttribute("height","100%");

  $$("path[id]", svg).forEach(el=>{
    const t=el.querySelector("title");
    const raw = zhFromAny(t?.textContent || el.getAttribute("data-name") || el.getAttribute("inkscape:label") || el.getAttribute("id") || "");
    const nm = stripQu(raw);
    if(!DATA[nm]) return;
    const group = Object.entries(GROUPS).find(([g,list])=>list.includes(nm))?.[0];
    if(!group) return;
    items.push({ el, newName:nm, oldName:DATA[nm].old, newPoj:DATA[nm].newPoj, oldPoj:DATA[nm].oldPoj, group });
  });

  /* è‘—è‰²ï¼ˆå…¨å€é¡¯ç¤ºï¼›åˆ‡æ›ç¾¤çµ„æ™‚åªæœ‰ã€Œéè©²ç¾¤ã€æ·¡åŒ–ï¼‰ */
  items.forEach(d=>{
    d.el.classList.add("district");
    d.el.setAttribute("fill", GROUP_COLOR[d.group]);
    d.el.setAttribute("stroke", "#1f2937");
    d.el.setAttribute("stroke-width","0.8");
    d.el.style.cursor="pointer";
  });

  /* âš ï¸ é‡è¦ï¼šç§»é™¤ v6.2 çš„ã€Œå¸¸é§æ–°åœ°åæ–‡å­—å±¤ã€ ==> æœ¬ç‰ˆä¸ç”Ÿæˆä»»ä½• <text> æ¨™ç±¤ */
  // ï¼ˆä¾ä½ çš„è¦æ±‚ï¼šåœ°åœ–æ–‡å­—åˆªæ‰ã€‚é€™è£¡åˆ»æ„ä¸å»ºç«‹ label-wrapã€‚ï¼‰

  /* ç¾¤çµ„åˆ‡æ›ï¼ˆå®Œå…¨æ²¿ç”¨ v6.2 é‚è¼¯ï¼‰ */
  let currentGroup="core";
  function updateGroup(){
    items.forEach(d=>{ d.el.classList.toggle("dim", d.group!==currentGroup); });
    $$("#groupbar button").forEach(b=>b.classList.toggle("is-on", b.dataset.group===currentGroup));
  }
  groupbar.addEventListener("click",(e)=>{
    const btn=e.target.closest("button[data-group]"); if(!btn) return;
    currentGroup=btn.dataset.group; updateGroup();
  });
  updateGroup();

  /* é»é¸å€å¡Š => é¡¯ç¤ºå½ˆå‡ºå¡ï¼ˆä½ç½®é è¿‘é»æ“Šè™•ï¼Œè¶…ç•Œé¿å…ï¼‰ */
  function showPopupAt(x,y){
    popup.style.display="block";
    const vpRect=viewport.getBoundingClientRect();
    const w=popup.offsetWidth, h=popup.offsetHeight;
    let left = x - vpRect.left + 10, top = y - vpRect.top + 10;
    if(left + w > vpRect.width) left = vpRect.width - w - 8;
    if(top + h > vpRect.height) top = vpRect.height - h - 8;
    if(left < 8) left = 8; if(top < 8) top = 8;
    popup.style.left = left+"px"; popup.style.top = top+"px";
  }

  /* éŸ³æª”ç‰©ä»¶ï¼ˆå–æ¶ˆè‡ªå‹•é€£æ’­ï¼šå„è‡ªæ’­æ”¾ï¼‰ */
  const audioNew = new Audio();
  const audioOld = new Audio();

  function buildSrc(prefix, name, kind){ return "map_assets/"+prefix+name+"_"+kind+".mp3"; }

  function playNew(d){
    // ä»¥è©²ç¾¤çµ„å…§ç´¢å¼• + 1 ç”¢ç”Ÿå…©ä½æ•¸å‰ç¶´ï¼ˆæ²¿ç”¨ v6.2 è¦å‰‡ï¼‰
    const idx=GROUPS[d.group].indexOf(d.newName)+1;
    const prefix=String(idx).padStart(2,'0');
    const src=buildSrc(prefix,d.newName,"new");
    audioNew.src=encodeURI(src);
    audioNew.play().catch(()=>{ console.warn("ç„¡æ³•æ’­æ”¾ï¼ˆæ–°åœ°åï¼‰ï¼š",src); });
  }
  function playOld(d){
    const idx=GROUPS[d.group].indexOf(d.newName)+1;
    const prefix=String(idx).padStart(2,'0');
    const src=buildSrc(prefix,d.oldName,"old");
    audioOld.src=encodeURI(src);
    audioOld.play().catch(()=>{ console.warn("ç„¡æ³•æ’­æ”¾ï¼ˆèˆŠåœ°åï¼‰ï¼š",src); });
  }

  /* ç¶å®šæ¯å€‹ path çš„äº’å‹• */
  items.forEach(d=>{
    d.el.addEventListener("click",(evt)=>{
      // è¦–è¦ºå¾®äº®
      d.el.classList.add("flash"); setTimeout(()=>d.el.classList.remove("flash"),800);

      // å¡«å…¥å½ˆå‡ºå¡å…§å®¹ï¼ˆæ–‡æ¡ˆä¾ä½ æœ€çµ‚éœ€æ±‚ï¼‰
      popNew.textContent = d.newName;
      popNewPoj.textContent = d.newPoj;
      popOld.textContent = d.oldName;
      popOldPoj.textContent = d.oldPoj;

      // å…©å€‹æŒ‰éˆ•å„è‡ªç¨ç«‹æ’­æ”¾ï¼ˆä¸è‡ªå‹•é€£æ’­ï¼‰
      btnNew.onclick = ()=>playNew(d);
      btnOld.onclick = ()=>playOld(d);

      showPopupAt(evt.clientX, evt.clientY);
    });
  });

  // é»ç©ºç™½è™•é—œé–‰å½ˆçª—
  svg.addEventListener("click",(e)=>{
    // è‹¥é»åˆ° path æœƒåœ¨ä¸Šé¢è™•ç†ï¼›æ­¤è™•é¿å…é»åˆ°é path çš„ SVG ç©ºç™½ä¹Ÿæ‰“é–‹/åœç•™
    if(e.target.tagName.toLowerCase()!=="path") popup.style.display="none";
  });
  document.addEventListener("click",(e)=>{
    const inside = e.target.closest("#popup") || e.target.closest("path");
    if(!inside) popup.style.display="none";
  });
}
</script>
</body>
</html>
