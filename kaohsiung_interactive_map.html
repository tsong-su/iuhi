<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>高雄市 38 區互動地圖</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: #f5f5f5;
      overflow: hidden;
      font-family: "Noto Sans TC", sans-serif;
    }

    svg {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .district-label {
      text-anchor: middle;
      pointer-events: none;
    }

    .new-name {
      font-weight: 700;
      font-size: 14px;
      fill: #000000;
    }

    .old-name {
      font-weight: 400;
      font-size: 14px;
      fill: #3a4a5a;
    }

    .info-box {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255,255,255,0.95);
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
      padding: 20px;
      min-width: 260px;
      z-index: 1000;
      display: none;
      text-align: center;
    }

    .info-title {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .info-subtitle {
      font-size: 18px;
      color: #3a4a5a;
      margin-bottom: 12px;
    }

    .audio-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .audio-btn {
      background-color: #ccc;
      color: #666;
      border: none;
      border-radius: 8px;
      padding: 8px 16px;
      font-size: 16px;
      cursor: not-allowed;
    }

    @media (orientation: portrait) {
      body {
        background-color: #ffffff;
      }
      .info-box {
        width: 80%;
        font-size: 16px;
      }
    }

    .map-container {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .note {
      position: fixed;
      bottom: 5px;
      width: 100%;
      text-align: center;
      color: #555;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="map-container">
    <object id="kaoMap" data="map_assets/Blank_Kaohsiung_map.svg" type="image/svg+xml"></object>
  </div>
  <div class="info-box" id="infoBox">
    <div class="info-title" id="newName"></div>
    <div class="info-subtitle" id="oldName"></div>
    <div class="audio-buttons">
      <button class="audio-btn">🔈 新地名</button>
      <button class="audio-btn">🔈 舊地名</button>
    </div>
  </div>
  <div class="note">📱 建議直式觀看效果最佳</div>

  <script>
    // 四群色系設定
    const colorGroups = {
      center: ["楠梓","左營","鼓山","三民","鹽埕","前金","新興","苓雅","旗津","前鎮","小港"],
      east: ["大樹","大寮","林園","大社","仁武","鳥松","鳳山"],
      north: ["茄萣","永安","彌陀","梓官","湖內","路竹","岡山","橋頭","阿蓮","田寮","燕巢"],
      mountain: ["內門","旗山","杉林","美濃","甲仙","六龜","那瑪夏","桃源","茂林"]
    };

    const colors = {
      center: ["#ff8a65","#ff7043","#e64a19","#ffab91","#ff5722","#f4511e","#d84315","#bf360c","#ffccbc","#ffb74d","#ff9800"],
      east: ["#ce93d8","#ab47bc","#8e24aa","#ba68c8","#9c27b0","#7b1fa2","#6a1b9a"],
      north: ["#dce775","#cddc39","#9ccc65","#8bc34a","#afb42b","#7cb342","#c0ca33","#9e9d24","#aed581","#d4e157","#b9f6ca"],
      mountain: ["#80cbc4","#4db6ac","#26a69a","#009688","#00897b","#00796b","#00695c","#004d40","#26c6da"]
    };

    // 新舊地名對照
    const nameMap = {
      "楠梓": "楠仔坑",
      "左營": "興隆里",
      "鼓山": "打狗山",
      "三民": "三塊厝",
      "鹽埕": "鹽埕埔",
      "前金": "前衿",
      "新興": "逮港埔",
      "苓雅": "笭仔寮",
      "旗津": "旗後",
      "前鎮": "前鎮",
      "小港": "港仔墘",
      "大樹": "大樹跤",
      "大寮": "大藔",
      "林園": "頂林仔邊",
      "大社": "三奶壇",
      "仁武": "仁武鎮",
      "鳥松": "鳥松跤",
      "鳳山": "下埤頭",
      "茄萣": "茄苳萣仔",
      "永安": "烏樹林",
      "彌陀": "彌陀港",
      "梓官": "梓官",
      "湖內": "大湖",
      "路竹": "半路竹",
      "岡山": "阿公店",
      "橋頭": "橋仔頭",
      "阿蓮": "阿嗹社",
      "田寮": "田藔",
      "燕巢": "援剿右",
      "內門": "羅漢內門",
      "旗山": "蕃薯藔",
      "杉林": "楠梓仙",
      "美濃": "瀰濃",
      "甲仙": "阿里關",
      "六龜": "六龜里社",
      "那瑪夏": "蚊子只",
      "桃源": "雅爾",
      "茂林": "屯仔"
    };

    window.addEventListener("load", () => {
      const obj = document.getElementById("kaoMap");
      const infoBox = document.getElementById("infoBox");
      const newName = document.getElementById("newName");
      const oldName = document.getElementById("oldName");

      obj.addEventListener("load", () => {
        const svgDoc = obj.contentDocument;
        const paths = svgDoc.querySelectorAll("path");

        paths.forEach((p) => {
          let dName = (p.querySelector("title") || {}).textContent || "";
          dName = dName.replace("區","").trim();

          // 依群組設定顏色
          let color = "#ccc";
          if (colorGroups.center.includes(dName)) color = colors.center[colorGroups.center.indexOf(dName) % colors.center.length];
          else if (colorGroups.east.includes(dName)) color = colors.east[colorGroups.east.indexOf(dName) % colors.east.length];
          else if (colorGroups.north.includes(dName)) color = colors.north[colorGroups.north.indexOf(dName) % colors.north.length];
          else if (colorGroups.mountain.includes(dName)) color = colors.mountain[colorGroups.mountain.indexOf(dName) % colors.mountain.length];
          p.style.fill = color;
          p.style.stroke = "#fff";
          p.style.strokeWidth = "1.2";

          // 點擊事件
          p.addEventListener("click", (e) => {
            const old = nameMap[dName] || "";
            newName.textContent = dName;
            oldName.textContent = old ? old : "—";
            infoBox.style.display = "block";
          });
        });
      });

      // 點地圖空白處關閉
      document.body.addEventListener("click", (e) => {
        if (e.target.closest(".info-box")) return;
        document.getElementById("infoBox").style.display = "none";
      });
    });
  </script>
</body>
</html>
