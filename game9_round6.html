<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8" />
  <title>果子骰仔遊戲－第2回</title>
  <style>
    body {
      background-color: #fff8e7;
      font-family: "DFKai-sb", "Microsoft JhengHei", sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h1 {
      color: #d2691e;
      font-size: 2em;
      margin-top: 20px;
    }
    #dice {
      width: 160px;
      height: 160px;
      margin: 40px auto;
      transition: transform 0.8s ease-out;
    }
    #result {
      font-size: 1.6em;
      color: #444;
      margin-top: 15px;
      line-height: 1.5;
    }
    button {
      background-color: #ffb347;
      color: white;
      border: none;
      padding: 12px 22px;
      font-size: 1.1em;
      border-radius: 12px;
      cursor: pointer;
      margin: 10px;
      box-shadow: 0 4px #d2691e;
    }
    button:hover {
      background-color: #ffa500;
    }
    button:active {
      box-shadow: 0 2px #d2691e;
      transform: translateY(2px);
    }
  </style>
</head>
<body>
  <h1>果子骰仔遊戲－第2回</h1>
  <img id="dice" src="game9_assets/fruit7.png" alt="dice">
  <div id="result"></div>
  <button onclick="rollDice()">擲果子骰仔！</button>
  <br>
  <button onclick="window.location.href='game9_round7.html'">後一回</button>
  <button onclick="window.location.href='https://tsong-su.github.io/iuhi/index.html'">轉去遊戲頭頁</button>

  <audio id="rollSound" src="game9_assets/Roll_the_dice.mp3"></audio>
  <audio id="stopSound" src="game9_assets/ding.mp3"></audio>

  <script>
    const fruits = [
      { img: "fruit7.png", name: "芳瓜", pinyin: "phang-kue", sound: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/4/4434.mp3" },
      { img: "fruit8.png", name: "葡萄", pinyin: "phû-tô", sound: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/9/9985.mp3" },
      { img: "fruit9.png", name: "蓮霧", pinyin: "lián-bū", sound: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/11/11322.mp3" },
      { img: "fruit10.png", name: "柳丁", pinyin: "liú-ting", sound: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5078.mp3" },
      { img: "fruit11.png", name: "木瓜", pinyin: "bo̍k-kue", sound: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/0/877.mp3" },
      { img: "fruit12.png", name: "梨仔", pinyin: "lâi-á", sound: "https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/7/7478.mp3" }
    ];

    const dice = document.getElementById("dice");
    const result = document.getElementById("result");
    const rollSound = document.getElementById("rollSound");
    const stopSound = document.getElementById("stopSound");

    let isRolling = false;

    function rollDice() {
      if (isRolling) return;
      isRolling = true;

      result.textContent = "";
      rollSound.currentTime = 0;
      rollSound.play();

      let rotation = 0;
      const spin = setInterval(() => {
        rotation += 20;
        dice.style.transform = `rotate(${rotation}deg)`;
      }, 60);

      // 保持每次出現機率平均
      setTimeout(() => {
        clearInterval(spin);
        const randomIndex = Math.floor(Math.random() * fruits.length);
        const chosen = fruits[randomIndex];

        dice.src = "game9_assets/" + chosen.img;
        dice.style.transform = "rotate(0deg)";
        result.innerHTML = `${chosen.name}<br>${chosen.pinyin}`;

        stopSound.currentTime = 0;
        stopSound.play();

        // 播放對應台語音檔
        const fruitAudio = new Audio(chosen.sound);
        fruitAudio.play();

        isRolling = false;
      }, 2000);
    }
  </script>
</body>
</html>
