<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æœå­éª°ä»”éŠæˆ²ï¼ç¬¬2å›</title>
<style>
  body { font-family: "Microsoft JhengHei", sans-serif; margin:0; padding:0; background:#fff; color:#333; text-align:center; }
  h1 { color:#5a2d6e; margin:10px 0; }
  .cube-wrap{ width:100%; display:flex; justify-content:center; align-items:center; }
  .cube-stage{
    width: min(90vw, 200px);
    height: min(90vw, 200px);
    max-width:200px;
    max-height:200px;
    perspective:1200px;
    margin:20px auto;
  }
  .cube{
    width:100%;
    height:100%;
    position:relative;
    transform-style: preserve-3d;
    transform: rotateX(0deg) rotateY(0deg);
    transition: transform 1s;
    border: 3px solid #5a2d6e; /* ä¿æŒç¬¬1å›é‚Šæ¡†è‰²ç³» */
    border-radius:10px;
    box-sizing:border-box;
  }
  .cube-face{
    position:absolute;
    width:100%;
    height:100%;
    backface-visibility:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:1.2em;
    font-weight:bold;
    color:#000;
  }
  .cube-face img{ max-width:80%; max-height:80%; }
  button{
    margin:10px 5px; padding:8px 16px; font-size:16px;
    border:none; border-radius:8px; cursor:pointer;
    background-color:#5a2d6e; color:#fff;
  }
  button:hover{ background-color:#7a3f8a; }
</style>
</head>
<body>
<h1>æœå­éª°ä»”éŠæˆ²ï¼ç¬¬2å›</h1>
<p>ğŸ“± å»ºè­°ç›´å¼è§€çœ‹æ•ˆæœæœ€ä½³</p>
<div class="cube-wrap">
  <div class="cube-stage">
    <div class="cube" id="dice">
      <div class="cube-face" data-fruit="fruit7"><img src="game9_assets/fruit7.png" alt="èŠ³ç“œ"></div>
      <div class="cube-face" data-fruit="fruit8"><img src="game9_assets/fruit8.png" alt="è‘¡è„"></div>
      <div class="cube-face" data-fruit="fruit9"><img src="game9_assets/fruit9.png" alt="è“®éœ§"></div>
      <div class="cube-face" data-fruit="fruit10"><img src="game9_assets/fruit10.png" alt="æŸ³ä¸"></div>
      <div class="cube-face" data-fruit="fruit11"><img src="game9_assets/fruit11.png" alt="æœ¨ç“œ"></div>
      <div class="cube-face" data-fruit="fruit12"><img src="game9_assets/fruit12.png" alt="æ¢¨ä»”"></div>
    </div>
  </div>
</div>
<p id="fruit-name" style="font-size:1.2em; font-weight:bold;"></p>
<button id="roll-btn">æ’šéª°ä»” ğŸ²</button>
<button id="retry-btn">é–£è€ä¸€æ“º</button>
<button onclick="location.href='index.html'">è½‰å»éŠæˆ²é ­é </button>
<button onclick="location.href='game9_round7.html'">å¾Œä¸€å›</button>

<audio id="roll-sound" src="game9_assets/Roll the dice.mp3"></audio>
<audio id="stop-sound" src="game9_assets/ding.mp3"></audio>
<audio id="fruit7-audio" src="https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/4/4434.mp3"></audio>
<audio id="fruit8-audio" src="https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/9/9985.mp3"></audio>
<audio id="fruit9-audio" src="https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/11/11322.mp3"></audio>
<audio id="fruit10-audio" src="https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5078.mp3"></audio>
<audio id="fruit11-audio" src="https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/0/877.mp3"></audio>
<audio id="fruit12-audio" src="https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/7/7478.mp3"></audio>

<script>
const cube = document.getElementById('dice');
const rollBtn = document.getElementById('roll-btn');
const retryBtn = document.getElementById('retry-btn');
const fruitName = document.getElementById('fruit-name');

const fruits = [
  {id:'fruit7', name:'èŠ³ç“œ', pinyin:'phang-kue', audio:document.getElementById('fruit7-audio')},
  {id:'fruit8', name:'è‘¡è„', pinyin:'phÃ»-tÃ´', audio:document.getElementById('fruit8-audio')},
  {id:'fruit9', name:'è“®éœ§', pinyin:'liÃ¡n-bÅ«', audio:document.getElementById('fruit9-audio')},
  {id:'fruit10', name:'æŸ³ä¸', pinyin:'liÃº-ting', audio:document.getElementById('fruit10-audio')},
  {id:'fruit11', name:'æœ¨ç“œ', pinyin:'boÌk-kue', audio:document.getElementById('fruit11-audio')},
  {id:'fruit12', name:'æ¢¨ä»”', pinyin:'lÃ¢i-Ã¡', audio:document.getElementById('fruit12-audio')}
];

let currentFruit = null;
let rolling = false;

function getRandomFruit(){
  const remaining = fruits.filter(f=>f!==currentFruit);
  const choice = remaining[Math.floor(Math.random()*remaining.length)];
  currentFruit = choice;
  return choice;
}

function rollDice(){
  if(rolling) return;
  rolling = true;
  fruitName.textContent = '';
  const fruit = getRandomFruit();

  document.getElementById('roll-sound').currentTime=0;
  document.getElementById('roll-sound').play();

  // éš¨æ©Ÿæ—‹è½‰ 3D
  const xRotate = 720 + Math.floor(Math.random()*720);
  const yRotate = 720 + Math.floor(Math.random()*720);
  cube.style.transform = `rotateX(${xRotate}deg) rotateY(${yRotate}deg)`;

  setTimeout(()=>{
    document.getElementById('roll-sound').pause();
    document.getElementById('stop-sound').currentTime=0;
    document.getElementById('stop-sound').play();

    setTimeout(()=>{
      fruitName.textContent = fruit.name + ' ' + fruit.pinyin;
      fruit.audio.currentTime = 0;
      fruit.audio.play();
      rolling=false;
    }, 500);
  }, 1000);
}

rollBtn.addEventListener('click', rollDice);
retryBtn.addEventListener('click', rollDice);
</script>
</body>
</html>
