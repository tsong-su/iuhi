<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8">
  <title>æœå­éª°ä»”éŠæˆ²ï¼ç¬¬2å›</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fff7e6; color: #333; margin:0; padding:0; }
    h1 { text-align: center; color: #a83279; }
    .cube-wrap{ width:100%; display:flex; justify-content:center; align-items:center; }
    .cube-stage{ width: min(90vw, 200px); height: min(90vw, 200px); max-width:200px; max-height:200px; perspective:1200px; }
    .cube { width:100%; height:100%; position: relative; transform-style: preserve-3d; transition: transform 1s ease-in-out; border: 3px solid #6a0d6a; border-radius: 8px; }
    .cube-face { position: absolute; width:100%; height:100%; backface-visibility: hidden; display:flex; justify-content:center; align-items:center; font-size:1rem; }
    .controls { text-align:center; margin-top:20px; }
    button { margin:5px; padding:10px 15px; background:#a83279; color:#fff; border:none; border-radius:5px; cursor:pointer; font-size:1rem; }
    button:hover { opacity:0.8; }
    .fruit-name { text-align:center; font-size:1.2rem; margin-top:15px; }
  </style>
</head>
<body>
  <h1>æœå­éª°ä»”éŠæˆ²ï¼ç¬¬2å›</h1>
  <p style="text-align:center;">ğŸ“± å»ºè­°ç›´å¼è§€çœ‹æ•ˆæœæœ€ä½³</p>
  <div class="cube-wrap">
    <div class="cube-stage">
      <div class="cube" id="dice">
        <div class="cube-face" id="face1"></div>
        <div class="cube-face" id="face2"></div>
        <div class="cube-face" id="face3"></div>
        <div class="cube-face" id="face4"></div>
        <div class="cube-face" id="face5"></div>
        <div class="cube-face" id="face6"></div>
      </div>
    </div>
  </div>
  <div class="fruit-name" id="fruitName"> </div>
  <div class="controls">
    <button id="rollBtn">æ’šéª°ä»” ğŸ²</button>
    <button id="rerollBtn">é–£è€ä¸€æ“º</button>
    <button onclick="location.href='index.html'">è½‰å»éŠæˆ²é ­é </button>
  </div>

  <audio id="rollSound" src="game9_assets/Roll the dice.mp3"></audio>
  <audio id="stopSound" src="game9_assets/ding.mp3"></audio>

  <script>
    const fruits = [
      {name: 'èŠ³ç“œ', pinyin:'phang-kue', img:'game9_assets/fruit7.png', audio:'https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/4/4434.mp3'},
      {name: 'è‘¡è„', pinyin:'phÃ»-tÃ´', img:'game9_assets/fruit8.png', audio:'https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/9/9985.mp3'},
      {name: 'è“®éœ§', pinyin:'liÃ¡n-bÅ«', img:'game9_assets/fruit9.png', audio:'https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/11/11322.mp3'},
      {name: 'æŸ³ä¸', pinyin:'liÃº-ting', img:'game9_assets/fruit10.png', audio:'https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5078.mp3'},
      {name: 'æœ¨ç“œ', pinyin:'boÌk-kue', img:'game9_assets/fruit11.png', audio:'https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/0/877.mp3'},
      {name: 'æ¢¨ä»”', pinyin:'lÃ¢i-Ã¡', img:'game9_assets/fruit12.png', audio:'https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/7/7478.mp3'}
    ];

    let dice = document.getElementById('dice');
    let fruitName = document.getElementById('fruitName');
    let rollBtn = document.getElementById('rollBtn');
    let rerollBtn = document.getElementById('rerollBtn');
    let rollSound = document.getElementById('rollSound');
    let stopSound = document.getElementById('stopSound');

    let rolledFruits = [];

    function getRandomFruit(){
      let available = fruits.filter(f => !rolledFruits.includes(f));
      if(available.length === 0) rolledFruits = [];
      let fruit = available[Math.floor(Math.random() * available.length)];
      rolledFruits.push(fruit);
      return fruit;
    }

    function rollDice(){
      rollBtn.disabled = true;
      rollSound.currentTime=0;
      rollSound.play();

      dice.style.transform = 'rotateX(720deg) rotateY(720deg)';
      setTimeout(()=>{
        rollSound.pause();
        stopSound.currentTime=0;
        stopSound.play();

        let fruit = getRandomFruit();
        dice.innerHTML = `<img src='${fruit.img}' style='width:100%;height:100%;object-fit:contain;'>`;
        fruitName.textContent = `${fruit.name} ${fruit.pinyin}`;

        let fruitAudio = new Audio(fruit.audio);
        fruitAudio.play();

        rollBtn.disabled = false;
      },1500);
    }

    rollBtn.addEventListener('click', rollDice);
    rerollBtn.addEventListener('click', rollDice);
  </script>
</body>
</html>
