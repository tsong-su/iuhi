<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>果子骰仔遊戲－第2回</title>
<style>
  body {
    font-family: "Microsoft JhengHei", sans-serif;
    background-color: #fff8e7;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 0;
    padding: 0;
  }
  h1 {
    color: #d35400;
    margin-top: 20px;
  }
  .advice {
    margin: 5px;
    font-size: 14px;
    color: #555;
  }
  .dice-container {
    perspective: 1000px;
    width: 200px;
    height: 200px;
    margin: 20px;
  }
  .dice {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 1s cubic-bezier(0.5, 1, 0.5, 1);
  }
  .dice div {
    position: absolute;
    width: 200px;
    height: 200px;
    background-color: #fff;
    border: 5px solid #f39c12;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    font-weight: bold;
    backface-visibility: hidden;
  }
  .face1 { transform: rotateY(0deg) translateZ(100px); }
  .face2 { transform: rotateY(90deg) translateZ(100px); }
  .face3 { transform: rotateY(180deg) translateZ(100px); }
  .face4 { transform: rotateY(-90deg) translateZ(100px); }
  .face5 { transform: rotateX(90deg) translateZ(100px); }
  .face6 { transform: rotateX(-90deg) translateZ(100px); }
  .buttons {
    margin-top: 20px;
  }
  .buttons button {
    margin: 5px;
    padding: 10px 15px;
    font-size: 16px;
    border: none;
    background-color: #f39c12;
    color: white;
    border-radius: 5px;
    cursor: pointer;
  }
  .buttons button:hover {
    background-color: #e67e22;
  }
</style>
</head>
<body>
<h1>果子骰仔遊戲－第2回</h1>
<div class="advice">📱建議直式觀看效果最佳</div>

<div class="dice-container">
  <div class="dice" id="dice">
    <div class="face1" id="face1"></div>
    <div class="face2" id="face2"></div>
    <div class="face3" id="face3"></div>
    <div class="face4" id="face4"></div>
    <div class="face5" id="face5"></div>
    <div class="face6" id="face6"></div>
  </div>
</div>

<div id="fruit-name" style="margin-top:10px; font-size:20px; color:#c0392b;"></div>

<div class="buttons">
  <button id="rollBtn">擲骰子</button>
  <button id="nextBtn" onclick="location.href='game9_round7.html'">後一回</button>
  <button onclick="location.href='https://tsong-su.github.io/iuhi/index.html'">轉去遊戲頭頁</button>
</div>

<audio id="rollSound" src="game9_assets/Roll the dice.mp3"></audio>
<audio id="dingSound" src="game9_assets/ding.mp3"></audio>
<audio id="fruitSound"></audio>

<script>
const dice = document.getElementById('dice');
const rollBtn = document.getElementById('rollBtn');
const fruitName = document.getElementById('fruit-name');
const rollSound = document.getElementById('rollSound');
const dingSound = document.getElementById('dingSound');
const fruitSound = document.getElementById('fruitSound');

const fruits = [
  {img:"game9_assets/fruit7.png", name:"芳瓜", pinyin:"phang-kue", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/4/4434.mp3"},
  {img:"game9_assets/fruit8.png", name:"葡萄", pinyin:"phû-tô", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/9/9985.mp3"},
  {img:"game9_assets/fruit9.png", name:"蓮霧", pinyin:"lián-bū", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/11/11322.mp3"},
  {img:"game9_assets/fruit10.png", name:"柳丁", pinyin:"liú-ting", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5078.mp3"},
  {img:"game9_assets/fruit11.png", name:"木瓜", pinyin:"bo̍k-kue", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/0/877.mp3"},
  {img:"game9_assets/fruit12.png", name:"梨仔", pinyin:"lâi-á", audio:"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/7/7478.mp3"}
];

// 將水果圖片設置到骰子面
function setDiceFaces() {
  for(let i=0;i<6;i++){
    const face = document.getElementById(`face${i+1}`);
    face.innerHTML = `<img src="${fruits[i].img}" alt="${fruits[i].name}" style="width:120px;height:120px;">`;
  }
}
setDiceFaces();

function rollDice() {
  rollBtn.disabled = true;
  let times = 20; 
  let interval = 100;
  let count = 0;
  const rollInterval = setInterval(() => {
    const rand = Math.floor(Math.random()*6);
    const angleX = 90*rand;
    const angleY = 90*Math.floor(Math.random()*6);
    dice.style.transform = `rotateX(${angleX}deg) rotateY(${angleY}deg)`;
    count++;
    if(count >= times){
      clearInterval(rollInterval);
      const selected = Math.floor(Math.random()*6);
      dice.style.transform = `rotateX(${selected*90}deg) rotateY(0deg)`;
      const fruit = fruits[selected];
      fruitName.textContent = `${fruit.name} ${fruit.pinyin}`;
      fruitSound.src = fruit.audio;
      dingSound.play();
      fruitSound.play();
      rollBtn.disabled = false;
    }
  }, interval);
  rollSound.play();
}

rollBtn.addEventListener('click', rollDice);
</script>
</body>
</html>
