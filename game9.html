<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8" />
  <title>華台水果語詞配對</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background-color: #fffbea;
    }
    h1 {
      background: #ff9800;
      color: white;
      margin: 0;
      padding: 10px;
    }
    #game-container {
      display: flex;
      justify-content: space-around;
      padding: 20px;
    }
    .column {
      width: 40%;
    }
    .word {
      border: 2px solid #ff9800;
      border-radius: 8px;
      padding: 10px;
      margin: 10px;
      background: white;
      cursor: pointer;
      font-size: 20px;
    }
    .matched {
      background: #c8e6c9;
      color: gray;
      pointer-events: none;
    }
    #message {
      margin-top: 20px;
      font-size: 22px;
      font-weight: bold;
    }
    #controls {
      margin-top: 20px;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>華台水果語詞配對</h1>
  <div id="game-container">
    <div class="column" id="left-column"></div>
    <div class="column" id="right-column"></div>
  </div>
  <div id="message"></div>
  <div id="controls">
    <button onclick="restartGame()">重新開始</button>
  </div>

  <script>
    const fruits = [
      {id: "fruit1", chinese: "芒果", taiwanese: "檨仔", audio: "audio/mango.mp3"},
      {id: "fruit2", chinese: "鳳梨", taiwanese: "王梨", audio: "audio/pineapple.mp3"},
      {id: "fruit3", chinese: "香蕉", taiwanese: "芎蕉", audio: "audio/banana.mp3"},
      {id: "fruit4", chinese: "西瓜", taiwanese: "西瓜", audio: "audio/watermelon.mp3"},
      {id: "fruit5", chinese: "橘子", taiwanese: "柑仔", audio: "audio/orange.mp3"}
    ];

    let leftWords = [];
    let rightWords = [];
    let selectedLeft = null;
    let selectedRight = null;

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function loadGame() {
      leftWords = shuffle([...fruits]);
      rightWords = shuffle([...fruits]);

      const leftColumn = document.getElementById("left-column");
      const rightColumn = document.getElementById("right-column");
      leftColumn.innerHTML = "";
      rightColumn.innerHTML = "";

      leftWords.forEach(fruit => {
        const div = document.createElement("div");
        div.className = "word";
        div.textContent = fruit.chinese;
        div.onclick = () => selectLeft(div, fruit);
        leftColumn.appendChild(div);
      });

      rightWords.forEach(fruit => {
        const div = document.createElement("div");
        div.className = "word";
        div.textContent = fruit.taiwanese;
        div.onclick = () => {
          window.open(`https://sutian.moe.edu.tw/zh-hant/search/result?word=${fruit.taiwanese}`, "_blank");
          selectRight(div, fruit);
        };
        rightColumn.appendChild(div);
      });
    }

    function selectLeft(element, fruit) {
      if (element.classList.contains("matched")) return;
      selectedLeft = {element, fruit};
      checkMatch();
    }

    function selectRight(element, fruit) {
      if (element.classList.contains("matched")) return;
      selectedRight = {element, fruit};
      checkMatch();
    }

    function checkMatch() {
      if (selectedLeft && selectedRight) {
        if (selectedLeft.fruit.id === selectedRight.fruit.id) {
          selectedLeft.element.classList.add("matched");
          selectedRight.element.classList.add("matched");
          playAudio(selectedLeft.fruit.audio);
          document.getElementById("message").textContent = "配對成功！";
        } else {
          document.getElementById("message").textContent = "錯誤，再試一次！";
        }
        selectedLeft = null;
        selectedRight = null;
      }
    }

    function playAudio(src) {
      const audio = new Audio(src);
      audio.play();
    }

    function restartGame() {
      document.getElementById("message").textContent = "";
      loadGame();
    }

    loadGame();
  </script>
</body>
</html>
