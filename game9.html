<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
  <meta charset="UTF-8">
  <title>華台水果語詞配對</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: "Microsoft JhengHei", sans-serif;
      background: #fdfcf5;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      margin: 10px 0 0 0;
      font-size: 28px;
      text-align: center;
    }
    .note {
      font-size: 16px;
      color: #666;
      margin-bottom: 10px;
      text-align: center;
    }
    .grid-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      width: 95%;
      max-width: 500px;
      margin-bottom: 20px;
    }
    .grid-item {
      background: #fff;
      border: 2px solid #ccc;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      user-select: none;
      transition: background 0.3s, border-color 0.3s;
    }
    .grid-item.matched {
      background: #b3e5fc; /* 配對成功底色 */
      border-color: #0288d1;
      color: #000;
      cursor: default;
    }
    .buttons {
      margin: 15px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    button {
      padding: 10px 18px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #0288d1;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #0277bd;
    }
  </style>
</head>
<body>
  <h1>華台水果語詞配對</h1>
  <div class="note">📱 直式觀看效果最佳</div>

  <div id="mandarinGrid" class="grid-container"></div>
  <div id="taiwaneseGrid" class="grid-container"></div>

  <div class="buttons">
    <button id="nextBtn">第一回</button>
  </div>

  <script>
    const rounds = [
      // 第一回 (刪掉 15.李子/李仔 → 剩 16)
      [
        ["1.蘋果", "蘋果仔"],
        ["2.香蕉", "芭蕉"],
        ["3.西瓜", "西瓜"],
        ["4.葡萄", "葡萄"],
        ["5.芒果", "檨仔"],
        ["6.木瓜", "木瓜"],
        ["7.橘子", "柑仔"],
        ["8.柚子", "柚仔"],
        ["9.櫻桃", "櫻桃仔"],
        ["10.鳳梨", "旺梨"],
        ["11.草莓", "草莓仔"],
        ["12.百香果", "百香果"],
        ["13.龍眼", "龍眼"],
        ["14.荔枝", "荔枝"],
        ["16.楊桃", "楊桃"],
        ["17.蓮霧", "蓮霧"]
      ],
      // 第二回 (刪掉 32.黑珍珠/烏真珠 → 剩 16)
      [
        ["18.番茄", "番茄仔"],
        ["19.檸檬", "檸檬"],
        ["20.火龍果", "火龍果"],
        ["21.柿子", "柿仔"],
        ["22.椰子", "椰仔"],
        ["23.楊梅", "楊梅"],
        ["24.橄欖", "欖仔"],
        ["25.枇杷", "枇杷仔"],
        ["26.桑葚", "桑椹仔"],
        ["27.釋迦", "釋迦"],
        ["28.山竹", "山竹"],
        ["29.人參果", "人參果"],
        ["30.哈密瓜", "哈密瓜"],
        ["31.蜜棗", "蜜棗仔"],
        ["33.無花果", "無花果"],
        ["34.椪柑", "椪柑"]
      ]
    ];

    let currentRound = 0;
    let selectedMandarin = null;
    let selectedTaiwanese = null;
    let pairs = [];

    function loadRound(roundIndex) {
      const round = rounds[roundIndex];
      pairs = round.map(pair => ({ mandarin: pair[0], taiwanese: pair[1], matched: false }));

      const mandarinGrid = document.getElementById("mandarinGrid");
      const taiwaneseGrid = document.getElementById("taiwaneseGrid");

      mandarinGrid.innerHTML = "";
      taiwaneseGrid.innerHTML = "";

      let mandarinWords = pairs.map(p => p.mandarin).sort(() => Math.random() - 0.5);
      let taiwaneseWords = pairs.map(p => p.taiwanese).sort(() => Math.random() - 0.5);

      mandarinWords.forEach(word => {
        const div = document.createElement("div");
        div.className = "grid-item";
        div.textContent = word;
        div.onclick = () => selectMandarin(div, word);
        mandarinGrid.appendChild(div);
      });

      taiwaneseWords.forEach(word => {
        const div = document.createElement("div");
        div.className = "grid-item";
        div.textContent = word;
        div.onclick = () => selectTaiwanese(div, word);
        taiwaneseGrid.appendChild(div);
      });

      document.getElementById("nextBtn").textContent = roundIndex === 0 ? "第一回" : "第二回";
    }

    function selectMandarin(div, word) {
      if (div.classList.contains("matched")) return;
      if (selectedMandarin) selectedMandarin.classList.remove("selected");
      selectedMandarin = div;
      div.classList.add("selected");
      checkMatch();
    }

    function selectTaiwanese(div, word) {
      if (div.classList.contains("matched")) return;
      if (selectedTaiwanese) selectedTaiwanese.classList.remove("selected");
      selectedTaiwanese = div;
      div.classList.add("selected");
      checkMatch();
    }

    function checkMatch() {
      if (selectedMandarin && selectedTaiwanese) {
        const mandarinWord = selectedMandarin.textContent;
        const taiwaneseWord = selectedTaiwanese.textContent;
        const pair = pairs.find(p => p.mandarin === mandarinWord && p.taiwanese === taiwaneseWord);

        if (pair) {
          selectedMandarin.classList.add("matched");
          selectedTaiwanese.classList.add("matched");
          pair.matched = true;
        }

        selectedMandarin.classList.remove("selected");
        selectedTaiwanese.classList.remove("selected");
        selectedMandarin = null;
        selectedTaiwanese = null;
      }
    }

    document.getElementById("nextBtn").addEventListener("click", () => {
      currentRound = (currentRound + 1) % rounds.length;
      loadRound(currentRound);
    });

    loadRound(currentRound);
  </script>
</body>
</html>
