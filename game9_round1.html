<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>果子圖片 & 台語果子名配對 - 第1回</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      background: #fefefe;
    }
    h1 {
      margin: 10px 0 5px 0;
      font-size: 22px;
      text-align: center;
    }
    .note {
      font-size: 20px;
      color: #d9534f;
      margin-bottom: 10px;
      font-weight: bold;
    }
    .game-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      width: 95vw;
      max-width: 500px;
      margin-bottom: 15px;
    }
    .card {
      width: 100%;
      aspect-ratio: 1 / 1;
      border: 2px solid #ccc;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      background: #fff;
      overflow: hidden;
      font-size: 60%;
    }
    .card img {
      max-width: 80%;
      max-height: 80%;
      object-fit: contain;
      pointer-events: none;
    }
    .card span {
      font-size: 1.6em; /* 大約是格子高度 60% */
      font-weight: bold;
      text-align: center;
      color: #333;
    }
    .matched {
      color: #000 !important;
      font-weight: bold;
    }
    .buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    button {
      padding: 10px 16px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      background: #ff9800;
      color: white;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background: #e68900;
    }
    #message {
      font-size: 32px;
      font-weight: bold;
      color: green;
      margin-top: 20px;
      opacity: 0;
      transition: transform 0.5s ease, opacity 0.5s ease;
      transform: scale(0.5);
    }
    #message.show {
      opacity: 1;
      transform: scale(1.4);
    }
  </style>
</head>
<body>
  <h1>果子圖片 & 台語果子名配對 - 第1回</h1>
  <div class="note">📱 建議直式觀看效果最佳</div>
  <div class="game-container" id="game"></div>
  <div class="buttons">
    <button onclick="location.reload()">重新開始</button>
    <button onclick="window.location.href='game9.html'">回首頁</button>
  </div>
  <div id="message">有夠 gâu！</div>

  <script>
    const fruits = [
      {"id":"fruit1","chinese":"芒果","taiwanese":"檨仔","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/12/12189.mp3"},
      {"id":"fruit2","chinese":"橘子","taiwanese":"柑仔","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5084.mp3"},
      {"id":"fruit3","chinese":"香蕉","taiwanese":"弓蕉","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/0/529.mp3"},
      {"id":"fruit4","chinese":"鳳梨","taiwanese":"鳳梨","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/8/812.mp3"},
      {"id":"fruit5","chinese":"西瓜","taiwanese":"西瓜","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/14/1461.mp3"},
      {"id":"fruit6","chinese":"木瓜","taiwanese":"木瓜","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/7/745.mp3"},
      {"id":"fruit7","chinese":"柿子","taiwanese":"柿仔","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/5/5285.mp3"},
      {"id":"fruit8","chinese":"李子","taiwanese":"李仔","audio":"https://sutian.moe.edu.tw/media/senn/mp3/imtong/subak/7/731.mp3"}
    ];

    const colors = ["#FFCDD2", "#F8BBD0", "#E1BEE7", "#BBDEFB", "#C8E6C9", "#FFF9C4", "#FFE0B2", "#D7CCC8"];
    let selected = [];
    let matchedCount = 0;

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function createCards() {
      const container = document.getElementById("game");
      let cards = [];
      fruits.forEach((f, i) => {
        cards.push({id: f.id, type: "img", content: `<img src="game9_assets/${f.id}.png">`, pair: f.id, idx: i});
        cards.push({id: f.id, type: "txt", content: `<span>${f.taiwanese}</span>`, pair: f.id, idx: i});
      });
      shuffle(cards).forEach(c => {
        const div = document.createElement("div");
        div.className = "card";
        div.dataset.id = c.id;
        div.dataset.type = c.type;
        div.dataset.idx = c.idx;
        div.innerHTML = c.content;
        div.addEventListener("click", () => selectCard(div));
        container.appendChild(div);
      });
    }

    function selectCard(card) {
      if (card.classList.contains("matched") || selected.includes(card)) return;
      selected.push(card);
      card.style.border = "2px solid blue";
      if (selected.length === 2) {
        const [c1, c2] = selected;
        if (c1.dataset.id === c2.dataset.id && c1.dataset.type !== c2.dataset.type) {
          const idx = c1.dataset.idx;
          const color = colors[idx % colors.length];
          [c1, c2].forEach(c => {
            c.classList.add("matched");
            c.style.background = color;
            c.style.border = "2px solid " + color;
          });
          new Audio(fruits[idx].audio).play();
          matchedCount++;
          if (matchedCount === fruits.length) {
            setTimeout(() => {
              new Audio("game9_assets/victory2.mp3").play();
              document.getElementById("message").classList.add("show");
            }, 300);
          }
        } else {
          new Audio("game9_assets/wrong1.mp3").play();
          setTimeout(() => {
            selected.forEach(c => c.style.border = "2px solid #ccc");
          }, 500);
        }
        selected = [];
      }
    }

    createCards();
  </script>
</body>
</html>
