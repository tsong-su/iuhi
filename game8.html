<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>咱來撚骰仔</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    text-align: center;
    background-color: #E1BEE7; /* 淺紫底色 */
    color: #333;
  }

  h1 {
    margin-top: 1em;
    font-size: 2em;
    font-weight: bold;
  }

  #dice-container {
    margin: 1em auto;
    width: 90%;
    max-width: 700px;
    height: 350px;
    background-color: #9575CD; /* 深紫色格子 */
    border-radius: 20px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
  }

  .dice-btn {
    margin: 0.3em;
    padding: 0.5em 1em;
    border: none;
    border-radius: 10px;
    font-size: 1.2em;
    font-weight: bold;
    cursor: pointer;
    color: white;
  }

  .dice-btn:nth-child(1){background:#f44336;}
  .dice-btn:nth-child(2){background:#e91e63;}
  .dice-btn:nth-child(3){background:#9c27b0;}
  .dice-btn:nth-child(4){background:#673ab7;}
  .dice-btn:nth-child(5){background:#3f51b5;}
  .dice-btn:nth-child(6){background:#2196f3;}
  .dice-btn:nth-child(7){background:#00bcd4;}

  #instruction, #tip {
    font-weight: bold;
    color: #1565C0; /* 藍色文字 */
    margin: 0.5em 0;
    font-size: 1.2em;
  }

  #home-btn {
    margin: 1em;
    padding: 0.5em 1.2em;
    font-size: 1em;
    font-weight: bold;
    border-radius: 12px;
    border: none;
    background-color: #4caf50;
    color: white;
    cursor: pointer;
  }

  .dice {
    width: 80px;
    height: 80px;
    margin: 5px;
    background-size: cover;
    border-radius: 10px;
    position: absolute;
    transition: all 0.5s ease;
  }
</style>
</head>
<body>
  <h1>咱來撚骰仔</h1>
  <div id="instruction">欲撚幾粒骰仔，在你揀。</div>
  <div id="dice-btns">
    <button class="dice-btn">1粒</button>
    <button class="dice-btn">2粒</button>
    <button class="dice-btn">3粒</button>
    <button class="dice-btn">4粒</button>
    <button class="dice-btn">5粒</button>
    <button class="dice-btn">6粒</button>
    <button class="dice-btn">7粒</button>
  </div>

  <div id="dice-container"></div>

  <div id="tip">骰仔若停，請你用台語講看覓這張郵票的地名。</div>
  <button id="home-btn" onclick="location.href='index.html'">轉去遊戲頭頁</button>

<script>
const diceContainer = document.getElementById('dice-container');
const diceButtons = document.querySelectorAll('.dice-btn');
const diceImages = [];
for(let i=1;i<=40;i++){
  diceImages.push('game8_assets/stamp'+i+'.jpg');
}

let currentDice = [];
let rollAudio = new Audio('game8_assets/Roll the dice.mp3');

function clearDice() {
  currentDice.forEach(d=>d.remove());
  currentDice = [];
}

function rollDice(count){
  clearDice();
  rollAudio.currentTime=0;
  rollAudio.play();

  for(let i=0;i<count;i++){
    const dice = document.createElement('div');
    dice.className = 'dice';
    const imgIndex = Math.floor(Math.random()*diceImages.length);
    dice.style.backgroundImage = `url(${diceImages[imgIndex]})`;

    // 隨機位置，避免重疊
    const containerWidth = diceContainer.clientWidth - 90;
    const containerHeight = diceContainer.clientHeight - 90;
    dice.style.left = Math.random()*containerWidth + 'px';
    dice.style.top = Math.random()*containerHeight + 'px';

    diceContainer.appendChild(dice);
    currentDice.push(dice);
  }
}

diceButtons.forEach((btn,index)=>{
  btn.addEventListener('click',()=>{
    rollDice(index+1);
  });
});
</script>
</body>
</html>
